{"ast":null,"code":"import EventNames from '../events';\nimport { toError, toPayload } from '../jsonrpc';\nimport misc from '../../helpers/misc';\nimport debugLogger from 'debug';\nconst debug = debugLogger('MEWconnectWeb3');\nexport default (async ({\n  payload,\n  eventHub\n}, res, next) => {\n  if (payload.method !== 'personal_sign') return next();\n  const msg = payload.params[0];\n  eventHub.emit(EventNames.SHOW_MSG_CONFIRM_MODAL, msg, _response => {\n    if (_response.reject) {\n      debug('USER DECLINED PERSONAL SIGN');\n      res(toError(payload.id, 'User Rejected Request', 4001));\n      return;\n    }\n\n    _response = misc.sanitizeHex(_response.toString('hex'));\n    res(null, toPayload(payload.id, _response));\n  });\n});","map":{"version":3,"sources":["/home/ryan/dev/defi/shadowtoken/node_modules/@myetherwallet/mewconnect-web-client/src/connectProvider/web3Provider/web3-provider/methods/personal_sign.js"],"names":["EventNames","toError","toPayload","misc","debugLogger","debug","payload","eventHub","res","next","method","msg","params","emit","SHOW_MSG_CONFIRM_MODAL","_response","reject","id","sanitizeHex","toString"],"mappings":"AAAA,OAAOA,UAAP,MAAuB,WAAvB;AACA,SAASC,OAAT,EAAkBC,SAAlB,QAAmC,YAAnC;AACA,OAAOC,IAAP,MAAiB,oBAAjB;AACA,OAAOC,WAAP,MAAwB,OAAxB;AACA,MAAMC,KAAK,GAAGD,WAAW,CAAC,gBAAD,CAAzB;AAEA,gBAAe,OAAO;AAAEE,EAAAA,OAAF;AAAWC,EAAAA;AAAX,CAAP,EAA8BC,GAA9B,EAAmCC,IAAnC,KAA4C;AACzD,MAAIH,OAAO,CAACI,MAAR,KAAmB,eAAvB,EAAwC,OAAOD,IAAI,EAAX;AACxC,QAAME,GAAG,GAAGL,OAAO,CAACM,MAAR,CAAe,CAAf,CAAZ;AACAL,EAAAA,QAAQ,CAACM,IAAT,CAAcb,UAAU,CAACc,sBAAzB,EAAiDH,GAAjD,EAAsDI,SAAS,IAAI;AACjE,QAAGA,SAAS,CAACC,MAAb,EAAoB;AAClBX,MAAAA,KAAK,CAAC,6BAAD,CAAL;AACAG,MAAAA,GAAG,CAACP,OAAO,CAACK,OAAO,CAACW,EAAT,EAAa,uBAAb,EAAsC,IAAtC,CAAR,CAAH;AACA;AACD;;AACDF,IAAAA,SAAS,GAAGZ,IAAI,CAACe,WAAL,CAAiBH,SAAS,CAACI,QAAV,CAAmB,KAAnB,CAAjB,CAAZ;AACAX,IAAAA,GAAG,CAAC,IAAD,EAAON,SAAS,CAACI,OAAO,CAACW,EAAT,EAAaF,SAAb,CAAhB,CAAH;AACD,GARD;AASD,CAZD","sourcesContent":["import EventNames from '../events';\nimport { toError, toPayload } from '../jsonrpc';\nimport misc from '../../helpers/misc'\nimport debugLogger from 'debug';\nconst debug = debugLogger('MEWconnectWeb3');\n\nexport default async ({ payload, eventHub }, res, next) => {\n  if (payload.method !== 'personal_sign') return next();\n  const msg = payload.params[0];\n  eventHub.emit(EventNames.SHOW_MSG_CONFIRM_MODAL, msg, _response => {\n    if(_response.reject){\n      debug('USER DECLINED PERSONAL SIGN');\n      res(toError(payload.id, 'User Rejected Request', 4001));\n      return;\n    }\n    _response = misc.sanitizeHex(_response.toString('hex'));\n    res(null, toPayload(payload.id, _response));\n  });\n};\n"]},"metadata":{},"sourceType":"module"}