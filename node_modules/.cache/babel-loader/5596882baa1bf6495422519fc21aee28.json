{"ast":null,"code":"\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Sochain = void 0;\n\nconst axios_1 = __importDefault(require(\"axios\"));\n\nconst utxo_1 = require(\"../../lib/utxo\");\n\nconst timeout_1 = require(\"./timeout\");\n\nconst fetchUTXOs = network => async (address, confirmations) => {\n  const url = `https://sochain.com/api/v2/get_tx_unspent/${network}/${address}/${confirmations}`;\n  const response = await axios_1.default.get(url, {\n    timeout: timeout_1.DEFAULT_TIMEOUT\n  });\n  return utxo_1.fixUTXOs(response.data.data.txs.map(utxo => ({\n    txHash: utxo.txid,\n    amount: utxo.value,\n    // scriptPubKey: utxo.script_hex,\n    vOut: utxo.output_no,\n    confirmations: utxo.confirmations\n  })), 8).filter(utxo => confirmations === 0 || utxo.confirmations >= confirmations).sort(utxo_1.sortUTXOs);\n};\n\nconst broadcastTransaction = network => async txHex => {\n  const response = await axios_1.default.post(`https://chain.so/send_tx/${network}`, {\n    tx_hex: txHex\n  }, {\n    timeout: timeout_1.DEFAULT_TIMEOUT\n  });\n  return response.data.data.txid;\n};\n\nexports.Sochain = {\n  fetchUTXOs,\n  broadcastTransaction\n};","map":{"version":3,"sources":["../../../../src/common/apis/sochain.ts"],"names":[],"mappings":";;;;;;;;;;;;;AAAA,MAAA,OAAA,GAAA,eAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AAEA,MAAA,MAAA,GAAA,OAAA,CAAA,gBAAA,CAAA;;AACA,MAAA,SAAA,GAAA,OAAA,CAAA,WAAA,CAAA;;AAYA,MAAM,UAAU,GAAI,OAAD,IAAqB,OAAO,OAAP,EAAwB,aAAxB,KAAiD;AACrF,QAAM,GAAG,GAAG,6CAA6C,OAAO,IAAI,OAAO,IAAI,aAAa,EAA5F;AACA,QAAM,QAAQ,GAAG,MAAM,OAAA,CAAA,OAAA,CAAM,GAAN,CAAuE,GAAvE,EAA4E;AAAE,IAAA,OAAO,EAAE,SAAA,CAAA;AAAX,GAA5E,CAAvB;AAEA,SAAO,MAAA,CAAA,QAAA,CAAS,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB,GAAnB,CAAuB,GAAvB,CAA2B,IAAI,KAAK;AAChD,IAAA,MAAM,EAAE,IAAI,CAAC,IADmC;AAEhD,IAAA,MAAM,EAAE,IAAI,CAAC,KAFmC;AAGhD;AACA,IAAA,IAAI,EAAE,IAAI,CAAC,SAJqC;AAKhD,IAAA,aAAa,EAAE,IAAI,CAAC;AAL4B,GAAL,CAA/B,CAAT,EAMF,CANE,EAOF,MAPE,CAOK,IAAI,IAAI,aAAa,KAAK,CAAlB,IAAuB,IAAI,CAAC,aAAL,IAAsB,aAP1D,EAQF,IARE,CAQG,MAAA,CAAA,SARH,CAAP;AASH,CAbD;;AAeA,MAAM,oBAAoB,GAAI,OAAD,IAAqB,MAAO,KAAP,IAAyC;AACvF,QAAM,QAAQ,GAAG,MAAM,OAAA,CAAA,OAAA,CAAM,IAAN,CAMpB,4BAA4B,OAAO,EANf,EAMmB;AAAE,IAAA,MAAM,EAAE;AAAV,GANnB,EAMsC;AAAE,IAAA,OAAO,EAAE,SAAA,CAAA;AAAX,GANtC,CAAvB;AAOA,SAAO,QAAQ,CAAC,IAAT,CAAc,IAAd,CAAmB,IAA1B;AACH,CATD;;AAWa,OAAA,CAAA,OAAA,GAAU;AACnB,EAAA,UADmB;AAEnB,EAAA;AAFmB,CAAV","sourceRoot":"","sourcesContent":["\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sochain = void 0;\nconst axios_1 = __importDefault(require(\"axios\"));\nconst utxo_1 = require(\"../../lib/utxo\");\nconst timeout_1 = require(\"./timeout\");\nconst fetchUTXOs = (network) => async (address, confirmations) => {\n    const url = `https://sochain.com/api/v2/get_tx_unspent/${network}/${address}/${confirmations}`;\n    const response = await axios_1.default.get(url, { timeout: timeout_1.DEFAULT_TIMEOUT });\n    return utxo_1.fixUTXOs(response.data.data.txs.map(utxo => ({\n        txHash: utxo.txid,\n        amount: utxo.value,\n        // scriptPubKey: utxo.script_hex,\n        vOut: utxo.output_no,\n        confirmations: utxo.confirmations,\n    })), 8)\n        .filter(utxo => confirmations === 0 || utxo.confirmations >= confirmations)\n        .sort(utxo_1.sortUTXOs);\n};\nconst broadcastTransaction = (network) => async (txHex) => {\n    const response = await axios_1.default.post(`https://chain.so/send_tx/${network}`, { tx_hex: txHex }, { timeout: timeout_1.DEFAULT_TIMEOUT });\n    return response.data.data.txid;\n};\nexports.Sochain = {\n    fetchUTXOs,\n    broadcastTransaction,\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic29jaGFpbi5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uL3NyYy9jb21tb24vYXBpcy9zb2NoYWluLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLGtEQUEwQjtBQUUxQix5Q0FBMkQ7QUFDM0QsdUNBQTRDO0FBWTVDLE1BQU0sVUFBVSxHQUFHLENBQUMsT0FBZSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsT0FBZSxFQUFFLGFBQXFCLEVBQUUsRUFBRTtJQUNyRixNQUFNLEdBQUcsR0FBRyw2Q0FBNkMsT0FBTyxJQUFJLE9BQU8sSUFBSSxhQUFhLEVBQUUsQ0FBQztJQUMvRixNQUFNLFFBQVEsR0FBRyxNQUFNLGVBQUssQ0FBQyxHQUFHLENBQThELEdBQUcsRUFBRSxFQUFFLE9BQU8sRUFBRSx5QkFBZSxFQUFFLENBQUMsQ0FBQztJQUVqSSxPQUFPLGVBQVEsQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNoRCxNQUFNLEVBQUUsSUFBSSxDQUFDLElBQUk7UUFDakIsTUFBTSxFQUFFLElBQUksQ0FBQyxLQUFLO1FBQ2xCLGlDQUFpQztRQUNqQyxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVM7UUFDcEIsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhO0tBQ3BDLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztTQUNGLE1BQU0sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLGFBQWEsS0FBSyxDQUFDLElBQUksSUFBSSxDQUFDLGFBQWEsSUFBSSxhQUFhLENBQUM7U0FDMUUsSUFBSSxDQUFDLGdCQUFTLENBQUMsQ0FBQztBQUN6QixDQUFDLENBQUM7QUFFRixNQUFNLG9CQUFvQixHQUFHLENBQUMsT0FBZSxFQUFFLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBYSxFQUFtQixFQUFFO0lBQ3ZGLE1BQU0sUUFBUSxHQUFHLE1BQU0sZUFBSyxDQUFDLElBQUksQ0FNOUIsNEJBQTRCLE9BQU8sRUFBRSxFQUFFLEVBQUUsTUFBTSxFQUFFLEtBQUssRUFBRSxFQUFFLEVBQUUsT0FBTyxFQUFFLHlCQUFlLEVBQUUsQ0FBQyxDQUFDO0lBQzNGLE9BQU8sUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ25DLENBQUMsQ0FBQztBQUVXLFFBQUEsT0FBTyxHQUFHO0lBQ25CLFVBQVU7SUFDVixvQkFBb0I7Q0FDdkIsQ0FBQSJ9"]},"metadata":{},"sourceType":"script"}