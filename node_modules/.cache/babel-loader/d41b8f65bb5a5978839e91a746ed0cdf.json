{"ast":null,"code":"/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n\n/* eslint-env node */\n'use strict';\n\nvar utils = require('./utils'); // Shimming starts here.\n\n\nmodule.exports = function (dependencies, opts) {\n  var window = dependencies && dependencies.window;\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  } // Utils.\n\n\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window); // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n  // Browser shims.\n\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n  var commonShim = require('./common_shim') || null; // Export to the adapter global object visible in the browser.\n\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  }; // Shim browser if found.\n\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection || !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming chrome.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = chromeShim;\n      commonShim.shimCreateObjectURL(window);\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection || !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming firefox.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = firefoxShim;\n      commonShim.shimCreateObjectURL(window);\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming edge.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = edgeShim;\n      commonShim.shimCreateObjectURL(window);\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n      edgeShim.shimGetDisplayMedia(window); // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n\n      logging('adapter.js shimming safari.'); // Export to the adapter global object visible in the browser.\n\n      adapter.browserShim = safariShim;\n      commonShim.shimCreateObjectURL(window);\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};","map":{"version":3,"sources":["/home/ryan/dev/defi/bridge/node_modules/@myetherwallet/mewconnect-web-client/node_modules/webrtc-adapter/src/js/adapter_factory.js"],"names":["utils","require","module","exports","dependencies","opts","window","options","shimChrome","shimFirefox","shimEdge","shimSafari","key","hasOwnProperty","call","logging","log","browserDetails","detectBrowser","chromeShim","edgeShim","firefoxShim","safariShim","commonShim","adapter","extractVersion","disableLog","disableWarnings","browser","shimPeerConnection","browserShim","shimCreateObjectURL","shimGetUserMedia","shimMediaStream","shimSourceObject","shimOnTrack","shimAddTrackRemoveTrack","shimGetSendersWithDtmf","shimSenderReceiverGetStats","fixNegotiationNeeded","shimRTCIceCandidate","shimMaxMessageSize","shimSendThrowTypeError","shimRemoveStream","shimSenderGetStats","shimReceiverGetStats","shimRTCDataChannel","shimReplaceTrack","shimGetDisplayMedia","shimRTCIceServerUrls","shimCreateOfferLegacy","shimCallbacksAPI","shimLocalStreamsAPI","shimRemoteStreamsAPI","shimTrackEventTransceiver"],"mappings":"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","sourcesContent":["/*\n *  Copyright (c) 2016 The WebRTC project authors. All Rights Reserved.\n *\n *  Use of this source code is governed by a BSD-style license\n *  that can be found in the LICENSE file in the root of the source\n *  tree.\n */\n /* eslint-env node */\n\n'use strict';\n\nvar utils = require('./utils');\n// Shimming starts here.\nmodule.exports = function(dependencies, opts) {\n  var window = dependencies && dependencies.window;\n\n  var options = {\n    shimChrome: true,\n    shimFirefox: true,\n    shimEdge: true,\n    shimSafari: true,\n  };\n\n  for (var key in opts) {\n    if (hasOwnProperty.call(opts, key)) {\n      options[key] = opts[key];\n    }\n  }\n\n  // Utils.\n  var logging = utils.log;\n  var browserDetails = utils.detectBrowser(window);\n\n  // Uncomment the line below if you want logging to occur, including logging\n  // for the switch statement below. Can also be turned on in the browser via\n  // adapter.disableLog(false), but then logging from the switch statement below\n  // will not appear.\n  // require('./utils').disableLog(false);\n\n  // Browser shims.\n  var chromeShim = require('./chrome/chrome_shim') || null;\n  var edgeShim = require('./edge/edge_shim') || null;\n  var firefoxShim = require('./firefox/firefox_shim') || null;\n  var safariShim = require('./safari/safari_shim') || null;\n  var commonShim = require('./common_shim') || null;\n\n  // Export to the adapter global object visible in the browser.\n  var adapter = {\n    browserDetails: browserDetails,\n    commonShim: commonShim,\n    extractVersion: utils.extractVersion,\n    disableLog: utils.disableLog,\n    disableWarnings: utils.disableWarnings\n  };\n\n  // Shim browser if found.\n  switch (browserDetails.browser) {\n    case 'chrome':\n      if (!chromeShim || !chromeShim.shimPeerConnection ||\n          !options.shimChrome) {\n        logging('Chrome shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming chrome.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = chromeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      chromeShim.shimGetUserMedia(window);\n      chromeShim.shimMediaStream(window);\n      chromeShim.shimSourceObject(window);\n      chromeShim.shimPeerConnection(window);\n      chromeShim.shimOnTrack(window);\n      chromeShim.shimAddTrackRemoveTrack(window);\n      chromeShim.shimGetSendersWithDtmf(window);\n      chromeShim.shimSenderReceiverGetStats(window);\n      chromeShim.fixNegotiationNeeded(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'firefox':\n      if (!firefoxShim || !firefoxShim.shimPeerConnection ||\n          !options.shimFirefox) {\n        logging('Firefox shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming firefox.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = firefoxShim;\n      commonShim.shimCreateObjectURL(window);\n\n      firefoxShim.shimGetUserMedia(window);\n      firefoxShim.shimSourceObject(window);\n      firefoxShim.shimPeerConnection(window);\n      firefoxShim.shimOnTrack(window);\n      firefoxShim.shimRemoveStream(window);\n      firefoxShim.shimSenderGetStats(window);\n      firefoxShim.shimReceiverGetStats(window);\n      firefoxShim.shimRTCDataChannel(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'edge':\n      if (!edgeShim || !edgeShim.shimPeerConnection || !options.shimEdge) {\n        logging('MS edge shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming edge.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = edgeShim;\n      commonShim.shimCreateObjectURL(window);\n\n      edgeShim.shimGetUserMedia(window);\n      edgeShim.shimPeerConnection(window);\n      edgeShim.shimReplaceTrack(window);\n      edgeShim.shimGetDisplayMedia(window);\n\n      // the edge shim implements the full RTCIceCandidate object.\n\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    case 'safari':\n      if (!safariShim || !options.shimSafari) {\n        logging('Safari shim is not included in this adapter release.');\n        return adapter;\n      }\n      logging('adapter.js shimming safari.');\n      // Export to the adapter global object visible in the browser.\n      adapter.browserShim = safariShim;\n      commonShim.shimCreateObjectURL(window);\n\n      safariShim.shimRTCIceServerUrls(window);\n      safariShim.shimCreateOfferLegacy(window);\n      safariShim.shimCallbacksAPI(window);\n      safariShim.shimLocalStreamsAPI(window);\n      safariShim.shimRemoteStreamsAPI(window);\n      safariShim.shimTrackEventTransceiver(window);\n      safariShim.shimGetUserMedia(window);\n\n      commonShim.shimRTCIceCandidate(window);\n      commonShim.shimMaxMessageSize(window);\n      commonShim.shimSendThrowTypeError(window);\n      break;\n    default:\n      logging('Unsupported browser!');\n      break;\n  }\n\n  return adapter;\n};\n"]},"metadata":{},"sourceType":"script"}