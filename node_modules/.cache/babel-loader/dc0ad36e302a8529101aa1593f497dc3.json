{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web3-utils'), require('web3-core-helpers'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('web3-core-method'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/assertThisInitialized'), require('lodash/isFunction'), require('lodash/isObject'), require('eth-lib/lib/hash'), require('eth-lib/lib/rlp'), require('eth-lib/lib/bytes'), require('eth-lib/lib/account'), require('web3-core'), require('scryptsy'), require('lodash/isString'), require('uuid'), require('randombytes'), require('pbkdf2'), require('browserify-cipher')) : typeof define === 'function' && define.amd ? define(['exports', 'web3-utils', 'web3-core-helpers', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'web3-core-method', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/assertThisInitialized', 'lodash/isFunction', 'lodash/isObject', 'eth-lib/lib/hash', 'eth-lib/lib/rlp', 'eth-lib/lib/bytes', 'eth-lib/lib/account', 'web3-core', 'scryptsy', 'lodash/isString', 'uuid', 'randombytes', 'pbkdf2', 'browserify-cipher'], factory) : (global = global || self, factory(global.Web3EthAccounts = {}, global.Utils, global.web3CoreHelpers, global._classCallCheck, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.web3CoreMethod, global._regeneratorRuntime, global._asyncToGenerator, global._createClass, global._assertThisInitialized, global.isFunction, global.isObject, global.Hash, global.RLP, global.Bytes, global.EthLibAccount, global.web3Core, global.scryptsy, global.isString, global.uuid, global.randomBytes, global.pbkdf2, global.browserifyCipher));\n})(this, function (exports, Utils, web3CoreHelpers, _classCallCheck, _possibleConstructorReturn, _getPrototypeOf, _inherits, web3CoreMethod, _regeneratorRuntime, _asyncToGenerator, _createClass, _assertThisInitialized, isFunction, isObject, Hash, RLP, Bytes, EthLibAccount, web3Core, scryptsy, isString, uuid, randomBytes, pbkdf2, browserifyCipher) {\n  'use strict';\n\n  _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n  _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n  _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n  _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n  _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n  _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n  _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n  _assertThisInitialized = _assertThisInitialized && _assertThisInitialized.hasOwnProperty('default') ? _assertThisInitialized['default'] : _assertThisInitialized;\n  isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n  isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n  Hash = Hash && Hash.hasOwnProperty('default') ? Hash['default'] : Hash;\n  RLP = RLP && RLP.hasOwnProperty('default') ? RLP['default'] : RLP;\n  Bytes = Bytes && Bytes.hasOwnProperty('default') ? Bytes['default'] : Bytes;\n  scryptsy = scryptsy && scryptsy.hasOwnProperty('default') ? scryptsy['default'] : scryptsy;\n  isString = isString && isString.hasOwnProperty('default') ? isString['default'] : isString;\n  uuid = uuid && uuid.hasOwnProperty('default') ? uuid['default'] : uuid;\n  randomBytes = randomBytes && randomBytes.hasOwnProperty('default') ? randomBytes['default'] : randomBytes;\n\n  var MethodFactory = function (_AbstractMethodFactor) {\n    _inherits(MethodFactory, _AbstractMethodFactor);\n\n    function MethodFactory(utils, formatters) {\n      var _this;\n\n      _classCallCheck(this, MethodFactory);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MethodFactory).call(this, utils, formatters));\n      _this.methods = {\n        getChainId: web3CoreMethod.ChainIdMethod,\n        getGasPrice: web3CoreMethod.GetGasPriceMethod,\n        getTransactionCount: web3CoreMethod.GetTransactionCountMethod\n      };\n      return _this;\n    }\n\n    return MethodFactory;\n  }(web3CoreMethod.AbstractMethodFactory);\n\n  var scrypt;\n  var isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n\n  if (isNode) {\n    var NODE_MIN_VER_WITH_BUILTIN_SCRYPT = '10.5.0';\n    var NODE_MIN_VER_INCOMPAT_SCRYPT_PKG = '12.0.0';\n\n    var semver = require('semver');\n\n    var useNodeBuiltin = isNode && semver.Range('>=' + NODE_MIN_VER_WITH_BUILTIN_SCRYPT).test(process.version);\n\n    var tryScryptPackage = function () {\n      var scryptPackage;\n      return function () {\n        if (scryptPackage !== undefined) {\n          return scryptPackage;\n        }\n\n        try {\n          scryptPackage = require('scrypt');\n        } catch (error) {\n          if (/was compiled against a different/.test(error.message)) {\n            throw error;\n          }\n\n          scryptPackage = null;\n        }\n\n        return scryptPackage;\n      };\n    }();\n\n    var canImprove = function canImprove(nodeVer) {\n      return \"can improve web3's peformance when running Node.js versions older than \".concat(nodeVer, \" by installing the (deprecated) scrypt package in your project\");\n    };\n\n    if (useNodeBuiltin) {\n      var crypto = require('crypto');\n\n      var fallbackCount = 0;\n\n      scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n        try {\n          return crypto.scryptSync(key, salt, dkLength, {\n            N: N,\n            r: r,\n            p: p\n          });\n        } catch (error) {\n          if (/scrypt:memory limit exceeded/.test(error.message)) {\n            var scryptPackage = tryScryptPackage();\n\n            if (scryptPackage) {\n              return scryptPackage.hashSync(key, {\n                N: N,\n                r: r,\n                p: p\n              }, dkLength, salt);\n            }\n\n            fallbackCount += 1;\n            console.warn(\"\\x1B[33m%s\\x1B[0m\", \"Memory limit exceeded for Node's built-in crypto.scrypt, falling back to scryptsy (times: \".concat(fallbackCount, \"), if this happens frequently you \").concat(canImprove(NODE_MIN_VER_INCOMPAT_SCRYPT_PKG)));\n            return scryptsy(key, salt, N, r, p, dkLength);\n          }\n\n          throw error;\n        }\n      };\n    } else {\n      var scryptPackage = tryScryptPackage();\n\n      if (scryptPackage) {\n        scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n          return scryptPackage.hashSync(key, {\n            N: N,\n            r: r,\n            p: p\n          }, dkLength, salt);\n        };\n      } else {\n        console.warn(\"\\x1B[33m%s\\x1B[0m\", \"You \".concat(canImprove(NODE_MIN_VER_WITH_BUILTIN_SCRYPT)));\n      }\n    }\n  }\n\n  scrypt = scrypt || scryptsy;\n  var scrypt$1 = scrypt;\n\n  var Account = function () {\n    function Account(options) {\n      var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n      _classCallCheck(this, Account);\n\n      this.address = options.address;\n      this.privateKey = options.privateKey;\n      this.nonce = options.nonce;\n      this.accounts = accounts;\n    }\n\n    _createClass(Account, [{\n      key: \"signTransaction\",\n      value: function signTransaction(tx, callback) {\n        return this.accounts.signTransaction(tx, this.privateKey, callback);\n      }\n    }, {\n      key: \"sign\",\n      value: function sign(data) {\n        if (Utils.isHexStrict(data)) {\n          data = Utils.hexToBytes(data);\n        }\n\n        var messageBuffer = Buffer.from(data);\n        var preamble = \"\\x19Ethereum Signed Message:\\n\".concat(data.length);\n        var preambleBuffer = Buffer.from(preamble);\n        var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n        var hash = Hash.keccak256s(ethMessage);\n        var signature = EthLibAccount.sign(hash, this.privateKey);\n        var vrs = EthLibAccount.decodeSignature(signature);\n        return {\n          message: data,\n          messageHash: hash,\n          v: vrs[0],\n          r: vrs[1],\n          s: vrs[2],\n          signature: signature\n        };\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(password, options) {\n        return Account.fromPrivateKey(this.privateKey, this.accounts).toV3Keystore(password, options);\n      }\n    }, {\n      key: \"toV3Keystore\",\n      value: function toV3Keystore(password, options) {\n        options = options || {};\n        var salt = options.salt || randomBytes(32);\n        var iv = options.iv || randomBytes(16);\n        var derivedKey;\n        var kdf = options.kdf || 'scrypt';\n        var kdfparams = {\n          dklen: options.dklen || 32,\n          salt: salt.toString('hex')\n        };\n\n        if (kdf === 'pbkdf2') {\n          kdfparams.c = options.c || 262144;\n          kdfparams.prf = 'hmac-sha256';\n          derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n        } else if (kdf === 'scrypt') {\n          kdfparams.n = options.n || 8192;\n          kdfparams.r = options.r || 8;\n          kdfparams.p = options.p || 1;\n          derivedKey = scrypt$1(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n        } else {\n          throw new Error('Unsupported kdf');\n        }\n\n        var cipher = browserifyCipher.createCipheriv(options.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n\n        if (!cipher) {\n          throw new Error('Unsupported cipher');\n        }\n\n        var ciphertext = Buffer.concat([cipher.update(Buffer.from(this.privateKey.replace('0x', ''), 'hex')), cipher.final()]);\n        var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')])).replace('0x', '');\n        return {\n          version: 3,\n          id: uuid.v4({\n            random: options.uuid || randomBytes(16)\n          }),\n          address: this.address.toLowerCase().replace('0x', ''),\n          crypto: {\n            ciphertext: ciphertext.toString('hex'),\n            cipherparams: {\n              iv: iv.toString('hex')\n            },\n            cipher: options.cipher || 'aes-128-ctr',\n            kdf: kdf,\n            kdfparams: kdfparams,\n            mac: mac.toString('hex')\n          }\n        };\n      }\n    }], [{\n      key: \"from\",\n      value: function from(entropy) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n        return new Account(EthLibAccount.create(entropy || Utils.randomHex(32)), accounts);\n      }\n    }, {\n      key: \"fromPrivateKey\",\n      value: function fromPrivateKey(privateKey) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n        if (!privateKey.startsWith('0x')) {\n          privateKey = '0x' + privateKey;\n        }\n\n        if (privateKey.length !== 66) {\n          throw new Error('Private key must be 32 bytes long');\n        }\n\n        return new Account(EthLibAccount.fromPrivate(privateKey), accounts);\n      }\n    }, {\n      key: \"fromV3Keystore\",\n      value: function fromV3Keystore(v3Keystore, password) {\n        var nonStrict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n        var accounts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n\n        if (!isString(password)) {\n          throw new Error('No password given.');\n        }\n\n        var json = isObject(v3Keystore) ? v3Keystore : JSON.parse(nonStrict ? v3Keystore.toLowerCase() : v3Keystore);\n\n        if (json.version !== 3) {\n          throw new Error('Not a valid V3 wallet');\n        }\n\n        var derivedKey;\n        var kdfparams;\n\n        if (json.crypto.kdf === 'scrypt') {\n          kdfparams = json.crypto.kdfparams;\n          derivedKey = scrypt$1(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n        } else if (json.crypto.kdf === 'pbkdf2') {\n          kdfparams = json.crypto.kdfparams;\n\n          if (kdfparams.prf !== 'hmac-sha256') {\n            throw new Error('Unsupported parameters to PBKDF2');\n          }\n\n          derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n        } else {\n          throw new Error('Unsupported key derivation scheme');\n        }\n\n        var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n        var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])).replace('0x', '');\n\n        if (mac !== json.crypto.mac) {\n          throw new Error('Key derivation failed - possibly wrong password');\n        }\n\n        var decipher = browserifyCipher.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n        var seed = \"0x\".concat(Buffer.concat([decipher.update(ciphertext), decipher.final()]).toString('hex'));\n        return Account.fromPrivateKey(seed, accounts);\n      }\n    }]);\n\n    return Account;\n  }();\n\n  var Wallet = function () {\n    function Wallet(utils, accountsModule) {\n      _classCallCheck(this, Wallet);\n\n      this.utils = utils;\n      this.accountsModule = accountsModule;\n      this.defaultKeyName = 'web3js_wallet';\n      this.accounts = {};\n      this.accountsIndex = 0;\n      return new Proxy(this, {\n        get: function get(target, name) {\n          if (target.accounts[name]) {\n            return target.accounts[name];\n          }\n\n          if (name === 'length') {\n            return target.accountsIndex;\n          }\n\n          return target[name];\n        }\n      });\n    }\n\n    _createClass(Wallet, [{\n      key: \"create\",\n      value: function create(numberOfAccounts, entropy) {\n        for (var i = 0; i < numberOfAccounts; ++i) {\n          this.add(Account.from(entropy || this.utils.randomHex(32), this.accountsModule));\n        }\n\n        return this;\n      }\n    }, {\n      key: \"get\",\n      value: function get(account) {\n        return this.accounts[account];\n      }\n    }, {\n      key: \"add\",\n      value: function add(account) {\n        if (isString(account)) {\n          account = Account.fromPrivateKey(account, this.accountsModule);\n        }\n\n        if (!this.accounts[account.address]) {\n          this.accounts[this.accountsIndex] = account;\n          this.accounts[account.address] = account;\n          this.accounts[account.address.toLowerCase()] = account;\n          this.accountsIndex++;\n          return account;\n        }\n\n        return this.accounts[account.address];\n      }\n    }, {\n      key: \"remove\",\n      value: function remove(addressOrIndex) {\n        var account = this.accounts[addressOrIndex];\n\n        if (account) {\n          delete this.accounts[account.address];\n          delete this.accounts[account.address.toLowerCase()];\n          delete this.accounts[account.index];\n          return true;\n        }\n\n        return false;\n      }\n    }, {\n      key: \"clear\",\n      value: function clear() {\n        for (var i = 0; i <= this.accountsIndex; i++) {\n          this.remove(i);\n        }\n\n        this.accountsIndex = 0;\n        return this;\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(password, options) {\n        var encryptedAccounts = [];\n\n        for (var i = 0; i < this.accountsIndex; i++) {\n          encryptedAccounts.push(this.accounts[i].encrypt(password, options));\n        }\n\n        return encryptedAccounts;\n      }\n    }, {\n      key: \"decrypt\",\n      value: function decrypt(encryptedWallet, password) {\n        var _this = this;\n\n        encryptedWallet.forEach(function (keystore) {\n          var account = Account.fromV3Keystore(keystore, password, false, _this.accountsModule);\n\n          if (!account) {\n            throw new Error(\"Couldn't decrypt accounts. Password wrong?\");\n          }\n\n          _this.add(account);\n        });\n        return this;\n      }\n    }, {\n      key: \"save\",\n      value: function save(password, keyName) {\n        console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n\n        if (typeof localStorage === 'undefined') {\n          throw new TypeError('window.localStorage is undefined.');\n        }\n\n        try {\n          localStorage.setItem(keyName || this.defaultKeyName, JSON.stringify(this.encrypt(password)));\n        } catch (error) {\n          if (error.code === 18) {\n            return true;\n          }\n\n          throw new Error(error);\n        }\n\n        return true;\n      }\n    }, {\n      key: \"load\",\n      value: function load(password, keyName) {\n        console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n\n        if (typeof localStorage === 'undefined') {\n          throw new TypeError('window.localStorage is undefined.');\n        }\n\n        var keystore;\n\n        try {\n          keystore = localStorage.getItem(keyName || this.defaultKeyName);\n\n          if (keystore) {\n            keystore = JSON.parse(keystore);\n          }\n        } catch (error) {\n          if (error.code === 18) {\n            keystore = this.defaultKeyName;\n          } else {\n            throw new Error(error);\n          }\n        }\n\n        return this.decrypt(keystore || [], password);\n      }\n    }]);\n\n    return Wallet;\n  }();\n\n  var Accounts = function (_AbstractWeb3Module) {\n    _inherits(Accounts, _AbstractWeb3Module);\n\n    function Accounts(provider, utils, formatters, methodFactory, options, net) {\n      var _this;\n\n      _classCallCheck(this, Accounts);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(Accounts).call(this, provider, options, methodFactory, net));\n      _this.utils = utils;\n      _this.formatters = formatters;\n      _this._transactionSigner = options.transactionSigner;\n      _this.defaultKeyName = 'web3js_wallet';\n      _this.accounts = {};\n      _this.accountsIndex = 0;\n      _this.wallet = new Wallet(utils, _assertThisInitialized(_this));\n      return _this;\n    }\n\n    _createClass(Accounts, [{\n      key: \"create\",\n      value: function create(entropy) {\n        return Account.from(entropy, this);\n      }\n    }, {\n      key: \"privateKeyToAccount\",\n      value: function privateKeyToAccount(privateKey) {\n        return Account.fromPrivateKey(privateKey, this);\n      }\n    }, {\n      key: \"hashMessage\",\n      value: function hashMessage(data) {\n        if (this.utils.isHexStrict(data)) {\n          data = this.utils.hexToBytes(data);\n        }\n\n        var messageBuffer = Buffer.from(data);\n        var preambleBuffer = Buffer.from(\"\\x19Ethereum Signed Message:\\n\".concat(data.length));\n        var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n        return Hash.keccak256s(ethMessage);\n      }\n    }, {\n      key: \"signTransaction\",\n      value: function () {\n        var _signTransaction = _asyncToGenerator(_regeneratorRuntime.mark(function _callee(tx, privateKey, callback) {\n          var account, signedTransaction;\n          return _regeneratorRuntime.wrap(function _callee$(_context) {\n            while (1) {\n              switch (_context.prev = _context.next) {\n                case 0:\n                  _context.prev = 0;\n                  account = Account.fromPrivateKey(privateKey, this);\n\n                  if (tx.chainId) {\n                    _context.next = 6;\n                    break;\n                  }\n\n                  _context.next = 5;\n                  return this.getChainId();\n\n                case 5:\n                  tx.chainId = _context.sent;\n\n                case 6:\n                  if (tx.gasPrice) {\n                    _context.next = 10;\n                    break;\n                  }\n\n                  _context.next = 9;\n                  return this.getGasPrice();\n\n                case 9:\n                  tx.gasPrice = _context.sent;\n\n                case 10:\n                  if (!(!tx.nonce && tx.nonce !== 0)) {\n                    _context.next = 14;\n                    break;\n                  }\n\n                  _context.next = 13;\n                  return this.getTransactionCount(account.address);\n\n                case 13:\n                  tx.nonce = _context.sent;\n\n                case 14:\n                  _context.next = 16;\n                  return this.transactionSigner.sign(this.formatters.inputCallFormatter(tx, this), account.privateKey);\n\n                case 16:\n                  signedTransaction = _context.sent;\n\n                  if (isFunction(callback)) {\n                    callback(false, signedTransaction);\n                  }\n\n                  return _context.abrupt(\"return\", signedTransaction);\n\n                case 21:\n                  _context.prev = 21;\n                  _context.t0 = _context[\"catch\"](0);\n\n                  if (!isFunction(callback)) {\n                    _context.next = 26;\n                    break;\n                  }\n\n                  callback(_context.t0, null);\n                  return _context.abrupt(\"return\");\n\n                case 26:\n                  throw _context.t0;\n\n                case 27:\n                case \"end\":\n                  return _context.stop();\n              }\n            }\n          }, _callee, this, [[0, 21]]);\n        }));\n\n        function signTransaction(_x, _x2, _x3) {\n          return _signTransaction.apply(this, arguments);\n        }\n\n        return signTransaction;\n      }()\n    }, {\n      key: \"recoverTransaction\",\n      value: function recoverTransaction(rawTx) {\n        var values = RLP.decode(rawTx);\n        var signature = EthLibAccount.encodeSignature(values.slice(6, 9));\n        var recovery = Bytes.toNumber(values[6]);\n        var extraData = recovery < 35 ? [] : [Bytes.fromNumber(recovery - 35 >> 1), '0x', '0x'];\n        var signingData = values.slice(0, 6).concat(extraData);\n        var signingDataHex = RLP.encode(signingData);\n        return EthLibAccount.recover(Hash.keccak256(signingDataHex), signature);\n      }\n    }, {\n      key: \"sign\",\n      value: function sign(data, privateKey) {\n        if (this.utils.isHexStrict(data)) {\n          data = this.utils.hexToBytes(data);\n        }\n\n        return Account.fromPrivateKey(privateKey, this).sign(data);\n      }\n    }, {\n      key: \"recover\",\n      value: function recover(message, signature, preFixed) {\n        if (isObject(message)) {\n          return this.recover(message.messageHash, EthLibAccount.encodeSignature([message.v, message.r, message.s]), true);\n        }\n\n        if (!preFixed) {\n          message = this.hashMessage(message);\n        }\n\n        if (arguments.length >= 4) {\n          return this.recover(arguments[0], EthLibAccount.encodeSignature([arguments[1], arguments[2], arguments[3]]), !!arguments[4]);\n        }\n\n        return EthLibAccount.recover(message, signature);\n      }\n    }, {\n      key: \"decrypt\",\n      value: function decrypt(v3Keystore, password, nonStrict) {\n        return Account.fromV3Keystore(v3Keystore, password, nonStrict, this);\n      }\n    }, {\n      key: \"encrypt\",\n      value: function encrypt(privateKey, password, options) {\n        return Account.fromPrivateKey(privateKey, this).toV3Keystore(password, options);\n      }\n    }, {\n      key: \"transactionSigner\",\n      get: function get() {\n        return this._transactionSigner;\n      },\n      set: function set(transactionSigner) {\n        if (transactionSigner.type && transactionSigner.type === 'TransactionSigner') {\n          throw new Error('Invalid TransactionSigner given!');\n        }\n\n        this._transactionSigner = transactionSigner;\n      }\n    }]);\n\n    return Accounts;\n  }(web3Core.AbstractWeb3Module);\n\n  function Accounts$1(provider) {\n    var net = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return new Accounts(provider, Utils, web3CoreHelpers.formatters, new MethodFactory(Utils, web3CoreHelpers.formatters), options, net);\n  }\n\n  exports.Accounts = Accounts$1;\n  Object.defineProperty(exports, '__esModule', {\n    value: true\n  });\n});","map":{"version":3,"sources":["/home/ryan/dev/defi/shadowtoken/node_modules/@renproject/gateway/node_modules/web3-eth-accounts/dist/web3-eth-accounts.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","Web3EthAccounts","Utils","web3CoreHelpers","_classCallCheck","_possibleConstructorReturn","_getPrototypeOf","_inherits","web3CoreMethod","_regeneratorRuntime","_asyncToGenerator","_createClass","_assertThisInitialized","isFunction","isObject","Hash","RLP","Bytes","EthLibAccount","web3Core","scryptsy","isString","uuid","randomBytes","pbkdf2","browserifyCipher","hasOwnProperty","MethodFactory","_AbstractMethodFactor","utils","formatters","_this","call","methods","getChainId","ChainIdMethod","getGasPrice","GetGasPriceMethod","getTransactionCount","GetTransactionCountMethod","AbstractMethodFactory","scrypt","isNode","Object","prototype","toString","process","NODE_MIN_VER_WITH_BUILTIN_SCRYPT","NODE_MIN_VER_INCOMPAT_SCRYPT_PKG","semver","useNodeBuiltin","Range","test","version","tryScryptPackage","scryptPackage","undefined","error","message","canImprove","nodeVer","concat","crypto","fallbackCount","key","salt","N","r","p","dkLength","scryptSync","hashSync","console","warn","scrypt$1","Account","options","accounts","arguments","length","address","privateKey","nonce","value","signTransaction","tx","callback","sign","data","isHexStrict","hexToBytes","messageBuffer","Buffer","from","preamble","preambleBuffer","ethMessage","hash","keccak256s","signature","vrs","decodeSignature","messageHash","v","s","encrypt","password","fromPrivateKey","toV3Keystore","iv","derivedKey","kdf","kdfparams","dklen","c","prf","pbkdf2Sync","n","Error","cipher","createCipheriv","slice","ciphertext","update","replace","final","mac","keccak256","id","v4","random","toLowerCase","cipherparams","entropy","create","randomHex","startsWith","fromPrivate","fromV3Keystore","v3Keystore","nonStrict","json","JSON","parse","decipher","createDecipheriv","seed","Wallet","accountsModule","defaultKeyName","accountsIndex","Proxy","get","target","name","numberOfAccounts","i","add","account","remove","addressOrIndex","index","clear","encryptedAccounts","push","decrypt","encryptedWallet","forEach","keystore","save","keyName","localStorage","TypeError","setItem","stringify","code","load","getItem","Accounts","_AbstractWeb3Module","provider","methodFactory","net","_transactionSigner","transactionSigner","wallet","privateKeyToAccount","hashMessage","_signTransaction","mark","_callee","signedTransaction","wrap","_callee$","_context","prev","next","chainId","sent","gasPrice","inputCallFormatter","abrupt","t0","stop","_x","_x2","_x3","apply","recoverTransaction","rawTx","values","decode","encodeSignature","recovery","toNumber","extraData","fromNumber","signingData","signingDataHex","encode","recover","preFixed","set","type","AbstractWeb3Module","Accounts$1","defineProperty"],"mappings":"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","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('web3-utils'), require('web3-core-helpers'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/possibleConstructorReturn'), require('@babel/runtime/helpers/getPrototypeOf'), require('@babel/runtime/helpers/inherits'), require('web3-core-method'), require('@babel/runtime/regenerator'), require('@babel/runtime/helpers/asyncToGenerator'), require('@babel/runtime/helpers/createClass'), require('@babel/runtime/helpers/assertThisInitialized'), require('lodash/isFunction'), require('lodash/isObject'), require('eth-lib/lib/hash'), require('eth-lib/lib/rlp'), require('eth-lib/lib/bytes'), require('eth-lib/lib/account'), require('web3-core'), require('scryptsy'), require('lodash/isString'), require('uuid'), require('randombytes'), require('pbkdf2'), require('browserify-cipher')) :\n    typeof define === 'function' && define.amd ? define(['exports', 'web3-utils', 'web3-core-helpers', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/possibleConstructorReturn', '@babel/runtime/helpers/getPrototypeOf', '@babel/runtime/helpers/inherits', 'web3-core-method', '@babel/runtime/regenerator', '@babel/runtime/helpers/asyncToGenerator', '@babel/runtime/helpers/createClass', '@babel/runtime/helpers/assertThisInitialized', 'lodash/isFunction', 'lodash/isObject', 'eth-lib/lib/hash', 'eth-lib/lib/rlp', 'eth-lib/lib/bytes', 'eth-lib/lib/account', 'web3-core', 'scryptsy', 'lodash/isString', 'uuid', 'randombytes', 'pbkdf2', 'browserify-cipher'], factory) :\n    (global = global || self, factory(global.Web3EthAccounts = {}, global.Utils, global.web3CoreHelpers, global._classCallCheck, global._possibleConstructorReturn, global._getPrototypeOf, global._inherits, global.web3CoreMethod, global._regeneratorRuntime, global._asyncToGenerator, global._createClass, global._assertThisInitialized, global.isFunction, global.isObject, global.Hash, global.RLP, global.Bytes, global.EthLibAccount, global.web3Core, global.scryptsy, global.isString, global.uuid, global.randomBytes, global.pbkdf2, global.browserifyCipher));\n}(this, function (exports, Utils, web3CoreHelpers, _classCallCheck, _possibleConstructorReturn, _getPrototypeOf, _inherits, web3CoreMethod, _regeneratorRuntime, _asyncToGenerator, _createClass, _assertThisInitialized, isFunction, isObject, Hash, RLP, Bytes, EthLibAccount, web3Core, scryptsy, isString, uuid, randomBytes, pbkdf2, browserifyCipher) { 'use strict';\n\n    _classCallCheck = _classCallCheck && _classCallCheck.hasOwnProperty('default') ? _classCallCheck['default'] : _classCallCheck;\n    _possibleConstructorReturn = _possibleConstructorReturn && _possibleConstructorReturn.hasOwnProperty('default') ? _possibleConstructorReturn['default'] : _possibleConstructorReturn;\n    _getPrototypeOf = _getPrototypeOf && _getPrototypeOf.hasOwnProperty('default') ? _getPrototypeOf['default'] : _getPrototypeOf;\n    _inherits = _inherits && _inherits.hasOwnProperty('default') ? _inherits['default'] : _inherits;\n    _regeneratorRuntime = _regeneratorRuntime && _regeneratorRuntime.hasOwnProperty('default') ? _regeneratorRuntime['default'] : _regeneratorRuntime;\n    _asyncToGenerator = _asyncToGenerator && _asyncToGenerator.hasOwnProperty('default') ? _asyncToGenerator['default'] : _asyncToGenerator;\n    _createClass = _createClass && _createClass.hasOwnProperty('default') ? _createClass['default'] : _createClass;\n    _assertThisInitialized = _assertThisInitialized && _assertThisInitialized.hasOwnProperty('default') ? _assertThisInitialized['default'] : _assertThisInitialized;\n    isFunction = isFunction && isFunction.hasOwnProperty('default') ? isFunction['default'] : isFunction;\n    isObject = isObject && isObject.hasOwnProperty('default') ? isObject['default'] : isObject;\n    Hash = Hash && Hash.hasOwnProperty('default') ? Hash['default'] : Hash;\n    RLP = RLP && RLP.hasOwnProperty('default') ? RLP['default'] : RLP;\n    Bytes = Bytes && Bytes.hasOwnProperty('default') ? Bytes['default'] : Bytes;\n    scryptsy = scryptsy && scryptsy.hasOwnProperty('default') ? scryptsy['default'] : scryptsy;\n    isString = isString && isString.hasOwnProperty('default') ? isString['default'] : isString;\n    uuid = uuid && uuid.hasOwnProperty('default') ? uuid['default'] : uuid;\n    randomBytes = randomBytes && randomBytes.hasOwnProperty('default') ? randomBytes['default'] : randomBytes;\n\n    var MethodFactory =\n    function (_AbstractMethodFactor) {\n      _inherits(MethodFactory, _AbstractMethodFactor);\n      function MethodFactory(utils, formatters) {\n        var _this;\n        _classCallCheck(this, MethodFactory);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(MethodFactory).call(this, utils, formatters));\n        _this.methods = {\n          getChainId: web3CoreMethod.ChainIdMethod,\n          getGasPrice: web3CoreMethod.GetGasPriceMethod,\n          getTransactionCount: web3CoreMethod.GetTransactionCountMethod\n        };\n        return _this;\n      }\n      return MethodFactory;\n    }(web3CoreMethod.AbstractMethodFactory);\n\n    var scrypt;\n    var isNode = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';\n    if (isNode) {\n      var NODE_MIN_VER_WITH_BUILTIN_SCRYPT = '10.5.0';\n      var NODE_MIN_VER_INCOMPAT_SCRYPT_PKG = '12.0.0';\n      var semver = require('semver');\n      var useNodeBuiltin = isNode && semver.Range('>=' + NODE_MIN_VER_WITH_BUILTIN_SCRYPT).test(process.version);\n      var tryScryptPackage = function () {\n        var scryptPackage;\n        return function () {\n          if (scryptPackage !== undefined) {\n            return scryptPackage;\n          }\n          try {\n            scryptPackage = require('scrypt');\n          } catch (error) {\n            if (/was compiled against a different/.test(error.message)) {\n              throw error;\n            }\n            scryptPackage = null;\n          }\n          return scryptPackage;\n        };\n      }();\n      var canImprove = function canImprove(nodeVer) {\n        return \"can improve web3's peformance when running Node.js versions older than \".concat(nodeVer, \" by installing the (deprecated) scrypt package in your project\");\n      };\n      if (useNodeBuiltin) {\n        var crypto = require('crypto');\n        var fallbackCount = 0;\n        scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n          try {\n            return crypto.scryptSync(key, salt, dkLength, {\n              N: N,\n              r: r,\n              p: p\n            });\n          } catch (error) {\n            if (/scrypt:memory limit exceeded/.test(error.message)) {\n              var scryptPackage = tryScryptPackage();\n              if (scryptPackage) {\n                return scryptPackage.hashSync(key, {\n                  N: N,\n                  r: r,\n                  p: p\n                }, dkLength, salt);\n              }\n              fallbackCount += 1;\n              console.warn(\"\\x1B[33m%s\\x1B[0m\", \"Memory limit exceeded for Node's built-in crypto.scrypt, falling back to scryptsy (times: \".concat(fallbackCount, \"), if this happens frequently you \").concat(canImprove(NODE_MIN_VER_INCOMPAT_SCRYPT_PKG)));\n              return scryptsy(key, salt, N, r, p, dkLength);\n            }\n            throw error;\n          }\n        };\n      } else {\n        var scryptPackage = tryScryptPackage();\n        if (scryptPackage) {\n          scrypt = function scrypt(key, salt, N, r, p, dkLength) {\n            return scryptPackage.hashSync(key, {\n              N: N,\n              r: r,\n              p: p\n            }, dkLength, salt);\n          };\n        } else {\n          console.warn(\"\\x1B[33m%s\\x1B[0m\", \"You \".concat(canImprove(NODE_MIN_VER_WITH_BUILTIN_SCRYPT)));\n        }\n      }\n    }\n    scrypt = scrypt || scryptsy;\n    var scrypt$1 = scrypt;\n\n    var Account =\n    function () {\n      function Account(options) {\n        var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n        _classCallCheck(this, Account);\n        this.address = options.address;\n        this.privateKey = options.privateKey;\n        this.nonce = options.nonce;\n        this.accounts = accounts;\n      }\n      _createClass(Account, [{\n        key: \"signTransaction\",\n        value: function signTransaction(tx, callback) {\n          return this.accounts.signTransaction(tx, this.privateKey, callback);\n        }\n      }, {\n        key: \"sign\",\n        value: function sign(data) {\n          if (Utils.isHexStrict(data)) {\n            data = Utils.hexToBytes(data);\n          }\n          var messageBuffer = Buffer.from(data);\n          var preamble = \"\\x19Ethereum Signed Message:\\n\".concat(data.length);\n          var preambleBuffer = Buffer.from(preamble);\n          var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n          var hash = Hash.keccak256s(ethMessage);\n          var signature = EthLibAccount.sign(hash, this.privateKey);\n          var vrs = EthLibAccount.decodeSignature(signature);\n          return {\n            message: data,\n            messageHash: hash,\n            v: vrs[0],\n            r: vrs[1],\n            s: vrs[2],\n            signature: signature\n          };\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(password, options) {\n          return Account.fromPrivateKey(this.privateKey, this.accounts).toV3Keystore(password, options);\n        }\n      }, {\n        key: \"toV3Keystore\",\n        value: function toV3Keystore(password, options) {\n          options = options || {};\n          var salt = options.salt || randomBytes(32);\n          var iv = options.iv || randomBytes(16);\n          var derivedKey;\n          var kdf = options.kdf || 'scrypt';\n          var kdfparams = {\n            dklen: options.dklen || 32,\n            salt: salt.toString('hex')\n          };\n          if (kdf === 'pbkdf2') {\n            kdfparams.c = options.c || 262144;\n            kdfparams.prf = 'hmac-sha256';\n            derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n          } else if (kdf === 'scrypt') {\n            kdfparams.n = options.n || 8192;\n            kdfparams.r = options.r || 8;\n            kdfparams.p = options.p || 1;\n            derivedKey = scrypt$1(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n          } else {\n            throw new Error('Unsupported kdf');\n          }\n          var cipher = browserifyCipher.createCipheriv(options.cipher || 'aes-128-ctr', derivedKey.slice(0, 16), iv);\n          if (!cipher) {\n            throw new Error('Unsupported cipher');\n          }\n          var ciphertext = Buffer.concat([cipher.update(Buffer.from(this.privateKey.replace('0x', ''), 'hex')), cipher.final()]);\n          var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), Buffer.from(ciphertext, 'hex')])).replace('0x', '');\n          return {\n            version: 3,\n            id: uuid.v4({\n              random: options.uuid || randomBytes(16)\n            }),\n            address: this.address.toLowerCase().replace('0x', ''),\n            crypto: {\n              ciphertext: ciphertext.toString('hex'),\n              cipherparams: {\n                iv: iv.toString('hex')\n              },\n              cipher: options.cipher || 'aes-128-ctr',\n              kdf: kdf,\n              kdfparams: kdfparams,\n              mac: mac.toString('hex')\n            }\n          };\n        }\n      }], [{\n        key: \"from\",\n        value: function from(entropy) {\n          var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          return new Account(EthLibAccount.create(entropy || Utils.randomHex(32)), accounts);\n        }\n      }, {\n        key: \"fromPrivateKey\",\n        value: function fromPrivateKey(privateKey) {\n          var accounts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n          if (!privateKey.startsWith('0x')) {\n            privateKey = '0x' + privateKey;\n          }\n          if (privateKey.length !== 66) {\n            throw new Error('Private key must be 32 bytes long');\n          }\n          return new Account(EthLibAccount.fromPrivate(privateKey), accounts);\n        }\n      }, {\n        key: \"fromV3Keystore\",\n        value: function fromV3Keystore(v3Keystore, password) {\n          var nonStrict = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n          var accounts = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n          if (!isString(password)) {\n            throw new Error('No password given.');\n          }\n          var json = isObject(v3Keystore) ? v3Keystore : JSON.parse(nonStrict ? v3Keystore.toLowerCase() : v3Keystore);\n          if (json.version !== 3) {\n            throw new Error('Not a valid V3 wallet');\n          }\n          var derivedKey;\n          var kdfparams;\n          if (json.crypto.kdf === 'scrypt') {\n            kdfparams = json.crypto.kdfparams;\n            derivedKey = scrypt$1(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.n, kdfparams.r, kdfparams.p, kdfparams.dklen);\n          } else if (json.crypto.kdf === 'pbkdf2') {\n            kdfparams = json.crypto.kdfparams;\n            if (kdfparams.prf !== 'hmac-sha256') {\n              throw new Error('Unsupported parameters to PBKDF2');\n            }\n            derivedKey = pbkdf2.pbkdf2Sync(Buffer.from(password), Buffer.from(kdfparams.salt, 'hex'), kdfparams.c, kdfparams.dklen, 'sha256');\n          } else {\n            throw new Error('Unsupported key derivation scheme');\n          }\n          var ciphertext = Buffer.from(json.crypto.ciphertext, 'hex');\n          var mac = Utils.keccak256(Buffer.concat([derivedKey.slice(16, 32), ciphertext])).replace('0x', '');\n          if (mac !== json.crypto.mac) {\n            throw new Error('Key derivation failed - possibly wrong password');\n          }\n          var decipher = browserifyCipher.createDecipheriv(json.crypto.cipher, derivedKey.slice(0, 16), Buffer.from(json.crypto.cipherparams.iv, 'hex'));\n          var seed = \"0x\".concat(Buffer.concat([decipher.update(ciphertext), decipher.final()]).toString('hex'));\n          return Account.fromPrivateKey(seed, accounts);\n        }\n      }]);\n      return Account;\n    }();\n\n    var Wallet =\n    function () {\n      function Wallet(utils, accountsModule) {\n        _classCallCheck(this, Wallet);\n        this.utils = utils;\n        this.accountsModule = accountsModule;\n        this.defaultKeyName = 'web3js_wallet';\n        this.accounts = {};\n        this.accountsIndex = 0;\n        return new Proxy(this, {\n          get: function get(target, name) {\n            if (target.accounts[name]) {\n              return target.accounts[name];\n            }\n            if (name === 'length') {\n              return target.accountsIndex;\n            }\n            return target[name];\n          }\n        });\n      }\n      _createClass(Wallet, [{\n        key: \"create\",\n        value: function create(numberOfAccounts, entropy) {\n          for (var i = 0; i < numberOfAccounts; ++i) {\n            this.add(Account.from(entropy || this.utils.randomHex(32), this.accountsModule));\n          }\n          return this;\n        }\n      }, {\n        key: \"get\",\n        value: function get(account) {\n          return this.accounts[account];\n        }\n      }, {\n        key: \"add\",\n        value: function add(account) {\n          if (isString(account)) {\n            account = Account.fromPrivateKey(account, this.accountsModule);\n          }\n          if (!this.accounts[account.address]) {\n            this.accounts[this.accountsIndex] = account;\n            this.accounts[account.address] = account;\n            this.accounts[account.address.toLowerCase()] = account;\n            this.accountsIndex++;\n            return account;\n          }\n          return this.accounts[account.address];\n        }\n      }, {\n        key: \"remove\",\n        value: function remove(addressOrIndex) {\n          var account = this.accounts[addressOrIndex];\n          if (account) {\n            delete this.accounts[account.address];\n            delete this.accounts[account.address.toLowerCase()];\n            delete this.accounts[account.index];\n            return true;\n          }\n          return false;\n        }\n      }, {\n        key: \"clear\",\n        value: function clear() {\n          for (var i = 0; i <= this.accountsIndex; i++) {\n            this.remove(i);\n          }\n          this.accountsIndex = 0;\n          return this;\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(password, options) {\n          var encryptedAccounts = [];\n          for (var i = 0; i < this.accountsIndex; i++) {\n            encryptedAccounts.push(this.accounts[i].encrypt(password, options));\n          }\n          return encryptedAccounts;\n        }\n      }, {\n        key: \"decrypt\",\n        value: function decrypt(encryptedWallet, password) {\n          var _this = this;\n          encryptedWallet.forEach(function (keystore) {\n            var account = Account.fromV3Keystore(keystore, password, false, _this.accountsModule);\n            if (!account) {\n              throw new Error(\"Couldn't decrypt accounts. Password wrong?\");\n            }\n            _this.add(account);\n          });\n          return this;\n        }\n      }, {\n        key: \"save\",\n        value: function save(password, keyName) {\n          console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n          if (typeof localStorage === 'undefined') {\n            throw new TypeError('window.localStorage is undefined.');\n          }\n          try {\n            localStorage.setItem(keyName || this.defaultKeyName, JSON.stringify(this.encrypt(password)));\n          } catch (error) {\n            if (error.code === 18) {\n              return true;\n            }\n            throw new Error(error);\n          }\n          return true;\n        }\n      }, {\n        key: \"load\",\n        value: function load(password, keyName) {\n          console.warn('SECURITY WARNING: Storing of accounts in the localStorage is highly insecure!');\n          if (typeof localStorage === 'undefined') {\n            throw new TypeError('window.localStorage is undefined.');\n          }\n          var keystore;\n          try {\n            keystore = localStorage.getItem(keyName || this.defaultKeyName);\n            if (keystore) {\n              keystore = JSON.parse(keystore);\n            }\n          } catch (error) {\n            if (error.code === 18) {\n              keystore = this.defaultKeyName;\n            } else {\n              throw new Error(error);\n            }\n          }\n          return this.decrypt(keystore || [], password);\n        }\n      }]);\n      return Wallet;\n    }();\n\n    var Accounts =\n    function (_AbstractWeb3Module) {\n      _inherits(Accounts, _AbstractWeb3Module);\n      function Accounts(provider, utils, formatters, methodFactory, options, net) {\n        var _this;\n        _classCallCheck(this, Accounts);\n        _this = _possibleConstructorReturn(this, _getPrototypeOf(Accounts).call(this, provider, options, methodFactory, net));\n        _this.utils = utils;\n        _this.formatters = formatters;\n        _this._transactionSigner = options.transactionSigner;\n        _this.defaultKeyName = 'web3js_wallet';\n        _this.accounts = {};\n        _this.accountsIndex = 0;\n        _this.wallet = new Wallet(utils, _assertThisInitialized(_this));\n        return _this;\n      }\n      _createClass(Accounts, [{\n        key: \"create\",\n        value: function create(entropy) {\n          return Account.from(entropy, this);\n        }\n      }, {\n        key: \"privateKeyToAccount\",\n        value: function privateKeyToAccount(privateKey) {\n          return Account.fromPrivateKey(privateKey, this);\n        }\n      }, {\n        key: \"hashMessage\",\n        value: function hashMessage(data) {\n          if (this.utils.isHexStrict(data)) {\n            data = this.utils.hexToBytes(data);\n          }\n          var messageBuffer = Buffer.from(data);\n          var preambleBuffer = Buffer.from(\"\\x19Ethereum Signed Message:\\n\".concat(data.length));\n          var ethMessage = Buffer.concat([preambleBuffer, messageBuffer]);\n          return Hash.keccak256s(ethMessage);\n        }\n      }, {\n        key: \"signTransaction\",\n        value: function () {\n          var _signTransaction = _asyncToGenerator(\n          _regeneratorRuntime.mark(function _callee(tx, privateKey, callback) {\n            var account, signedTransaction;\n            return _regeneratorRuntime.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    _context.prev = 0;\n                    account = Account.fromPrivateKey(privateKey, this);\n                    if (tx.chainId) {\n                      _context.next = 6;\n                      break;\n                    }\n                    _context.next = 5;\n                    return this.getChainId();\n                  case 5:\n                    tx.chainId = _context.sent;\n                  case 6:\n                    if (tx.gasPrice) {\n                      _context.next = 10;\n                      break;\n                    }\n                    _context.next = 9;\n                    return this.getGasPrice();\n                  case 9:\n                    tx.gasPrice = _context.sent;\n                  case 10:\n                    if (!(!tx.nonce && tx.nonce !== 0)) {\n                      _context.next = 14;\n                      break;\n                    }\n                    _context.next = 13;\n                    return this.getTransactionCount(account.address);\n                  case 13:\n                    tx.nonce = _context.sent;\n                  case 14:\n                    _context.next = 16;\n                    return this.transactionSigner.sign(this.formatters.inputCallFormatter(tx, this), account.privateKey);\n                  case 16:\n                    signedTransaction = _context.sent;\n                    if (isFunction(callback)) {\n                      callback(false, signedTransaction);\n                    }\n                    return _context.abrupt(\"return\", signedTransaction);\n                  case 21:\n                    _context.prev = 21;\n                    _context.t0 = _context[\"catch\"](0);\n                    if (!isFunction(callback)) {\n                      _context.next = 26;\n                      break;\n                    }\n                    callback(_context.t0, null);\n                    return _context.abrupt(\"return\");\n                  case 26:\n                    throw _context.t0;\n                  case 27:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee, this, [[0, 21]]);\n          }));\n          function signTransaction(_x, _x2, _x3) {\n            return _signTransaction.apply(this, arguments);\n          }\n          return signTransaction;\n        }()\n      }, {\n        key: \"recoverTransaction\",\n        value: function recoverTransaction(rawTx) {\n          var values = RLP.decode(rawTx);\n          var signature = EthLibAccount.encodeSignature(values.slice(6, 9));\n          var recovery = Bytes.toNumber(values[6]);\n          var extraData = recovery < 35 ? [] : [Bytes.fromNumber(recovery - 35 >> 1), '0x', '0x'];\n          var signingData = values.slice(0, 6).concat(extraData);\n          var signingDataHex = RLP.encode(signingData);\n          return EthLibAccount.recover(Hash.keccak256(signingDataHex), signature);\n        }\n      }, {\n        key: \"sign\",\n        value: function sign(data, privateKey) {\n          if (this.utils.isHexStrict(data)) {\n            data = this.utils.hexToBytes(data);\n          }\n          return Account.fromPrivateKey(privateKey, this).sign(data);\n        }\n      }, {\n        key: \"recover\",\n        value: function recover(message, signature, preFixed) {\n          if (isObject(message)) {\n            return this.recover(message.messageHash, EthLibAccount.encodeSignature([message.v, message.r, message.s]), true);\n          }\n          if (!preFixed) {\n            message = this.hashMessage(message);\n          }\n          if (arguments.length >= 4) {\n            return this.recover(arguments[0], EthLibAccount.encodeSignature([arguments[1], arguments[2], arguments[3]]), !!arguments[4]);\n          }\n          return EthLibAccount.recover(message, signature);\n        }\n      }, {\n        key: \"decrypt\",\n        value: function decrypt(v3Keystore, password, nonStrict) {\n          return Account.fromV3Keystore(v3Keystore, password, nonStrict, this);\n        }\n      }, {\n        key: \"encrypt\",\n        value: function encrypt(privateKey, password, options) {\n          return Account.fromPrivateKey(privateKey, this).toV3Keystore(password, options);\n        }\n      }, {\n        key: \"transactionSigner\",\n        get: function get() {\n          return this._transactionSigner;\n        }\n        ,\n        set: function set(transactionSigner) {\n          if (transactionSigner.type && transactionSigner.type === 'TransactionSigner') {\n            throw new Error('Invalid TransactionSigner given!');\n          }\n          this._transactionSigner = transactionSigner;\n        }\n      }]);\n      return Accounts;\n    }(web3Core.AbstractWeb3Module);\n\n    function Accounts$1(provider) {\n      var net = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n      return new Accounts(provider, Utils, web3CoreHelpers.formatters, new MethodFactory(Utils, web3CoreHelpers.formatters), options, net);\n    }\n\n    exports.Accounts = Accounts$1;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n}));\n"]},"metadata":{},"sourceType":"script"}