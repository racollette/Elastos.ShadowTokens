{"ast":null,"code":"/**\n * @license\n *\n * Push v1.0.9\n * =========\n * A compact, cross-browser solution for the JavaScript Notifications API\n *\n * Credits\n * -------\n * Tsvetan Tsvetkov (ttsvetko)\n * Alex Gibson (alexgibson)\n *\n * License\n * -------\n *\n * The MIT License (MIT)\n *\n * Copyright (c) 2015-2017 Tyler Nickerson\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n */\n!function (i, t) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? module.exports = t() : \"function\" == typeof define && define.amd ? define(t) : (i = i || self).Push = t();\n}(this, function () {\n  \"use strict\";\n\n  var i = {\n    errors: {\n      incompatible: \"\".concat(\"PushError:\", \" Push.js is incompatible with browser.\"),\n      invalid_plugin: \"\".concat(\"PushError:\", \" plugin class missing from plugin manifest (invalid plugin). Please check the documentation.\"),\n      invalid_title: \"\".concat(\"PushError:\", \" title of notification must be a string\"),\n      permission_denied: \"\".concat(\"PushError:\", \" permission request declined\"),\n      sw_notification_error: \"\".concat(\"PushError:\", \" could not show a ServiceWorker notification due to the following reason: \"),\n      sw_registration_error: \"\".concat(\"PushError:\", \" could not register the ServiceWorker due to the following reason: \"),\n      unknown_interface: \"\".concat(\"PushError:\", \" unable to create notification: unknown interface\")\n    }\n  };\n\n  function t(i) {\n    return (t = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (i) {\n      return typeof i;\n    } : function (i) {\n      return i && \"function\" == typeof Symbol && i.constructor === Symbol && i !== Symbol.prototype ? \"symbol\" : typeof i;\n    })(i);\n  }\n\n  function n(i, t) {\n    if (!(i instanceof t)) throw new TypeError(\"Cannot call a class as a function\");\n  }\n\n  function e(i, t) {\n    for (var n = 0; n < t.length; n++) {\n      var e = t[n];\n      e.enumerable = e.enumerable || !1, e.configurable = !0, \"value\" in e && (e.writable = !0), Object.defineProperty(i, e.key, e);\n    }\n  }\n\n  function o(i, t, n) {\n    return t && e(i.prototype, t), n && e(i, n), i;\n  }\n\n  function r(i, t) {\n    if (\"function\" != typeof t && null !== t) throw new TypeError(\"Super expression must either be null or a function\");\n    i.prototype = Object.create(t && t.prototype, {\n      constructor: {\n        value: i,\n        writable: !0,\n        configurable: !0\n      }\n    }), t && c(i, t);\n  }\n\n  function s(i) {\n    return (s = Object.setPrototypeOf ? Object.getPrototypeOf : function (i) {\n      return i.__proto__ || Object.getPrototypeOf(i);\n    })(i);\n  }\n\n  function c(i, t) {\n    return (c = Object.setPrototypeOf || function (i, t) {\n      return i.__proto__ = t, i;\n    })(i, t);\n  }\n\n  function a(i, t) {\n    return !t || \"object\" != typeof t && \"function\" != typeof t ? function (i) {\n      if (void 0 === i) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return i;\n    }(i) : t;\n  }\n\n  var u = function () {\n    function i(t) {\n      n(this, i), this._win = t, this.GRANTED = \"granted\", this.DEFAULT = \"default\", this.DENIED = \"denied\", this._permissions = [this.GRANTED, this.DEFAULT, this.DENIED];\n    }\n\n    return o(i, [{\n      key: \"request\",\n      value: function (i, t) {\n        return arguments.length > 0 ? this._requestWithCallback.apply(this, arguments) : this._requestAsPromise();\n      }\n    }, {\n      key: \"_requestWithCallback\",\n      value: function (i, t) {\n        var n,\n            e = this,\n            o = this.get(),\n            r = !1,\n            s = function () {\n          var n = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : e._win.Notification.permission;\n          r || (r = !0, void 0 === n && e._win.webkitNotifications && (n = e._win.webkitNotifications.checkPermission()), n === e.GRANTED || 0 === n ? i && i() : t && t());\n        };\n\n        o !== this.DEFAULT ? s(o) : this._win.webkitNotifications && this._win.webkitNotifications.checkPermission ? this._win.webkitNotifications.requestPermission(s) : this._win.Notification && this._win.Notification.requestPermission ? (n = this._win.Notification.requestPermission(s)) && n.then && n.then(s).catch(function () {\n          t && t();\n        }) : i && i();\n      }\n    }, {\n      key: \"_requestAsPromise\",\n      value: function () {\n        var i = this,\n            t = this.get(),\n            n = t !== this.DEFAULT,\n            e = this._win.Notification && this._win.Notification.requestPermission,\n            o = this._win.webkitNotifications && this._win.webkitNotifications.checkPermission;\n        return new Promise(function (r, s) {\n          var c,\n              a = !1,\n              u = function (t) {\n            a || (a = !0, !function (t) {\n              return t === i.GRANTED || 0 === t;\n            }(t) ? s() : r());\n          };\n\n          n ? u(t) : o ? i._win.webkitNotifications.requestPermission(function (i) {\n            u(i);\n          }) : e ? (c = i._win.Notification.requestPermission(u)) && c.then && c.then(u).catch(s) : r();\n        });\n      }\n    }, {\n      key: \"has\",\n      value: function () {\n        return this.get() === this.GRANTED;\n      }\n    }, {\n      key: \"get\",\n      value: function () {\n        return this._win.Notification && this._win.Notification.permission ? this._win.Notification.permission : this._win.webkitNotifications && this._win.webkitNotifications.checkPermission ? this._permissions[this._win.webkitNotifications.checkPermission()] : navigator.mozNotification ? this.GRANTED : this._win.external && this._win.external.msIsSiteMode ? this._win.external.msIsSiteMode() ? this.GRANTED : this.DEFAULT : this.GRANTED;\n      }\n    }]), i;\n  }(),\n      f = function () {\n    function i() {\n      n(this, i);\n    }\n\n    return o(i, null, [{\n      key: \"isUndefined\",\n      value: function (i) {\n        return void 0 === i;\n      }\n    }, {\n      key: \"isNull\",\n      value: function (i) {\n        return null === obj;\n      }\n    }, {\n      key: \"isString\",\n      value: function (i) {\n        return \"string\" == typeof i;\n      }\n    }, {\n      key: \"isFunction\",\n      value: function (i) {\n        return i && \"[object Function]\" === {}.toString.call(i);\n      }\n    }, {\n      key: \"isObject\",\n      value: function (i) {\n        return \"object\" === t(i);\n      }\n    }, {\n      key: \"objectMerge\",\n      value: function (i, t) {\n        for (var n in t) i.hasOwnProperty(n) && this.isObject(i[n]) && this.isObject(t[n]) ? this.objectMerge(i[n], t[n]) : i[n] = t[n];\n      }\n    }]), i;\n  }(),\n      l = function i(t) {\n    n(this, i), this._win = t;\n  },\n      h = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function () {\n        return void 0 !== this._win.Notification;\n      }\n    }, {\n      key: \"create\",\n      value: function (i, t) {\n        return new this._win.Notification(i, {\n          icon: f.isString(t.icon) || f.isUndefined(t.icon) || f.isNull(t.icon) ? t.icon : t.icon.x32,\n          body: t.body,\n          tag: t.tag,\n          requireInteraction: t.requireInteraction\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function (i) {\n        i.close();\n      }\n    }]), t;\n  }(),\n      _ = function (t) {\n    function e() {\n      return n(this, e), a(this, s(e).apply(this, arguments));\n    }\n\n    return r(e, l), o(e, [{\n      key: \"isSupported\",\n      value: function () {\n        return void 0 !== this._win.navigator && void 0 !== this._win.navigator.serviceWorker;\n      }\n    }, {\n      key: \"getFunctionBody\",\n      value: function (i) {\n        var t = i.toString().match(/function[^{]+{([\\s\\S]*)}$/);\n        return null != t && t.length > 1 ? t[1] : null;\n      }\n    }, {\n      key: \"create\",\n      value: function (t, n, e, o, r) {\n        var s = this;\n        this._win.navigator.serviceWorker.register(o), this._win.navigator.serviceWorker.ready.then(function (o) {\n          var c = {\n            id: t,\n            link: e.link,\n            origin: document.location.href,\n            onClick: f.isFunction(e.onClick) ? s.getFunctionBody(e.onClick) : \"\",\n            onClose: f.isFunction(e.onClose) ? s.getFunctionBody(e.onClose) : \"\"\n          };\n          void 0 !== e.data && null !== e.data && (c = Object.assign(c, e.data)), o.showNotification(n, {\n            icon: e.icon,\n            body: e.body,\n            vibrate: e.vibrate,\n            tag: e.tag,\n            data: c,\n            requireInteraction: e.requireInteraction,\n            silent: e.silent\n          }).then(function () {\n            o.getNotifications().then(function (i) {\n              o.active.postMessage(\"\"), r(i);\n            });\n          }).catch(function (t) {\n            throw new Error(i.errors.sw_notification_error + t.message);\n          });\n        }).catch(function (t) {\n          throw new Error(i.errors.sw_registration_error + t.message);\n        });\n      }\n    }, {\n      key: \"close\",\n      value: function () {}\n    }]), e;\n  }(),\n      v = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function () {\n        return void 0 !== this._win.navigator.mozNotification;\n      }\n    }, {\n      key: \"create\",\n      value: function (i, t) {\n        var n = this._win.navigator.mozNotification.createNotification(i, t.body, t.icon);\n\n        return n.show(), n;\n      }\n    }]), t;\n  }(),\n      d = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function () {\n        return void 0 !== this._win.external && void 0 !== this._win.external.msIsSiteMode;\n      }\n    }, {\n      key: \"create\",\n      value: function (i, t) {\n        return this._win.external.msSiteModeClearIconOverlay(), this._win.external.msSiteModeSetIconOverlay(f.isString(t.icon) || f.isUndefined(t.icon) ? t.icon : t.icon.x16, i), this._win.external.msSiteModeActivate(), null;\n      }\n    }, {\n      key: \"close\",\n      value: function () {\n        this._win.external.msSiteModeClearIconOverlay();\n      }\n    }]), t;\n  }(),\n      w = function (i) {\n    function t() {\n      return n(this, t), a(this, s(t).apply(this, arguments));\n    }\n\n    return r(t, l), o(t, [{\n      key: \"isSupported\",\n      value: function () {\n        return void 0 !== this._win.webkitNotifications;\n      }\n    }, {\n      key: \"create\",\n      value: function (i, t) {\n        var n = this._win.webkitNotifications.createNotification(t.icon, i, t.body);\n\n        return n.show(), n;\n      }\n    }, {\n      key: \"close\",\n      value: function (i) {\n        i.cancel();\n      }\n    }]), t;\n  }();\n\n  return new (function () {\n    function t(i) {\n      n(this, t), this._currentId = 0, this._notifications = {}, this._win = i, this.Permission = new u(i), this._agents = {\n        desktop: new h(i),\n        chrome: new _(i),\n        firefox: new v(i),\n        ms: new d(i),\n        webkit: new w(i)\n      }, this._configuration = {\n        serviceWorker: \"/serviceWorker.min.js\",\n        fallback: function (i) {}\n      };\n    }\n\n    return o(t, [{\n      key: \"_closeNotification\",\n      value: function (t) {\n        var n = !0,\n            e = this._notifications[t];\n\n        if (void 0 !== e) {\n          if (n = this._removeNotification(t), this._agents.desktop.isSupported()) this._agents.desktop.close(e);else if (this._agents.webkit.isSupported()) this._agents.webkit.close(e);else {\n            if (!this._agents.ms.isSupported()) throw n = !1, new Error(i.errors.unknown_interface);\n\n            this._agents.ms.close();\n          }\n          return n;\n        }\n\n        return !1;\n      }\n    }, {\n      key: \"_addNotification\",\n      value: function (i) {\n        var t = this._currentId;\n        return this._notifications[t] = i, this._currentId++, t;\n      }\n    }, {\n      key: \"_removeNotification\",\n      value: function (i) {\n        var t = !1;\n        return this._notifications.hasOwnProperty(i) && (delete this._notifications[i], t = !0), t;\n      }\n    }, {\n      key: \"_prepareNotification\",\n      value: function (i, t) {\n        var n,\n            e = this;\n        return n = {\n          get: function () {\n            return e._notifications[i];\n          },\n          close: function () {\n            e._closeNotification(i);\n          }\n        }, t.timeout && setTimeout(function () {\n          n.close();\n        }, t.timeout), n;\n      }\n    }, {\n      key: \"_serviceWorkerCallback\",\n      value: function (i, t, n) {\n        var e = this,\n            o = this._addNotification(i[i.length - 1]);\n\n        navigator && navigator.serviceWorker && (navigator.serviceWorker.addEventListener(\"message\", function (i) {\n          var t = JSON.parse(i.data);\n          \"close\" === t.action && Number.isInteger(t.id) && e._removeNotification(t.id);\n        }), n(this._prepareNotification(o, t))), n(null);\n      }\n    }, {\n      key: \"_createCallback\",\n      value: function (i, t, n) {\n        var e,\n            o = this,\n            r = null;\n        if (t = t || {}, e = function (i) {\n          o._removeNotification(i), f.isFunction(t.onClose) && t.onClose.call(o, r);\n        }, this._agents.desktop.isSupported()) try {\n          r = this._agents.desktop.create(i, t);\n        } catch (e) {\n          var s = this._currentId,\n              c = this.config().serviceWorker;\n          this._agents.chrome.isSupported() && this._agents.chrome.create(s, i, t, c, function (i) {\n            return o._serviceWorkerCallback(i, t, n);\n          });\n        } else this._agents.webkit.isSupported() ? r = this._agents.webkit.create(i, t) : this._agents.firefox.isSupported() ? this._agents.firefox.create(i, t) : this._agents.ms.isSupported() ? r = this._agents.ms.create(i, t) : (t.title = i, this.config().fallback(t));\n\n        if (null !== r) {\n          var a = this._addNotification(r),\n              u = this._prepareNotification(a, t);\n\n          f.isFunction(t.onShow) && r.addEventListener(\"show\", t.onShow), f.isFunction(t.onError) && r.addEventListener(\"error\", t.onError), f.isFunction(t.onClick) && r.addEventListener(\"click\", t.onClick), r.addEventListener(\"close\", function () {\n            e(a);\n          }), r.addEventListener(\"cancel\", function () {\n            e(a);\n          }), n(u);\n        }\n\n        n(null);\n      }\n    }, {\n      key: \"create\",\n      value: function (t, n) {\n        var e,\n            o = this;\n        if (!f.isString(t)) throw new Error(i.errors.invalid_title);\n        return e = this.Permission.has() ? function (i, e) {\n          try {\n            o._createCallback(t, n, i);\n          } catch (i) {\n            e(i);\n          }\n        } : function (e, r) {\n          o.Permission.request().then(function () {\n            o._createCallback(t, n, e);\n          }).catch(function () {\n            r(i.errors.permission_denied);\n          });\n        }, new Promise(e);\n      }\n    }, {\n      key: \"count\",\n      value: function () {\n        var i,\n            t = 0;\n\n        for (i in this._notifications) this._notifications.hasOwnProperty(i) && t++;\n\n        return t;\n      }\n    }, {\n      key: \"close\",\n      value: function (i) {\n        var t;\n\n        for (t in this._notifications) if (this._notifications.hasOwnProperty(t) && this._notifications[t].tag === i) return this._closeNotification(t);\n      }\n    }, {\n      key: \"clear\",\n      value: function () {\n        var i,\n            t = !0;\n\n        for (i in this._notifications) this._notifications.hasOwnProperty(i) && (t = t && this._closeNotification(i));\n\n        return t;\n      }\n    }, {\n      key: \"supported\",\n      value: function () {\n        var i = !1;\n\n        for (var t in this._agents) this._agents.hasOwnProperty(t) && (i = i || this._agents[t].isSupported());\n\n        return i;\n      }\n    }, {\n      key: \"config\",\n      value: function (i) {\n        return (void 0 !== i || null !== i && f.isObject(i)) && f.objectMerge(this._configuration, i), this._configuration;\n      }\n    }, {\n      key: \"extend\",\n      value: function (t) {\n        var n,\n            e = {}.hasOwnProperty;\n        if (!e.call(t, \"plugin\")) throw new Error(i.errors.invalid_plugin);\n\n        for (var o in e.call(t, \"config\") && f.isObject(t.config) && null !== t.config && this.config(t.config), n = new (0, t.plugin)(this.config())) e.call(n, o) && f.isFunction(n[o]) && (this[o] = n[o]);\n      }\n    }]), t;\n  }())(\"undefined\" != typeof window ? window : global);\n});","map":{"version":3,"sources":["../src/push/Messages.js","../src/push/Permission.js","../src/push/Util.js","../src/agents/AbstractAgent.js","../src/agents/DesktopAgent.js","../src/agents/MobileChromeAgent.js","../src/agents/MobileFirefoxAgent.js","../src/agents/MSAgent.js","../src/agents/WebKitAgent.js","../src/index.js","../src/push/Push.js"],"names":["errors","incompatible","invalid_plugin","invalid_title","permission_denied","sw_notification_error","sw_registration_error","unknown_interface","Permission","win","_win","GRANTED","DEFAULT","DENIED","_permissions","this","onGranted","onDenied","arguments","length","_requestWithCallback","_requestAsPromise","existing","get","resolved","resolve","result","_this","Notification","permission","webkitNotifications","checkPermission","request","requestPermission","then","_this2","hasPermissions","isModernAPI","isWebkitAPI","Promise","resolvePromise","rejectPromise","resolver","isGranted","navigator","mozNotification","external","msIsSiteMode","Util","obj","undefined","obs","toString","call","_typeof","target","source","key","hasOwnProperty","isObject","objectMerge","AbstractAgent","DesktopAgent","title","options","icon","isString","isUndefined","isNull","x32","body","tag","requireInteraction","notification","close","MobileChromeAgent","serviceWorker","func","str","match","id","callback","register","ready","localData","link","origin","document","location","href","onClick","isFunction","getFunctionBody","onClose","data","Object","assign","registration","showNotification","vibrate","silent","getNotifications","active","postMessage","notifications","error","Error","Messages","message","MobileFirefoxAgent","createNotification","show","MSAgent","msSiteModeClearIconOverlay","msSiteModeSetIconOverlay","x16","msSiteModeActivate","WebKitAgent","cancel","window","global","_currentId","_notifications","_agents","desktop","chrome","firefox","ms","webkit","_configuration","fallback","payload","success","_removeNotification","isSupported","wrapper","_closeNotification","timeout","setTimeout","_addNotification","addEventListener","JSON","parse","event","action","Number","isInteger","_prepareNotification","_this3","create","e","sw","config","_serviceWorkerCallback","onShow","onError","promiseCallback","has","reject","_this4","_createCallback","count","supported","agent","settings","manifest","plugin","hasProp","Plugin","member"],"mappings":"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","sourcesContent":["// @flow\nconst errorPrefix = 'PushError:';\n\nexport default {\n    errors: {\n        incompatible: `${errorPrefix} Push.js is incompatible with browser.`,\n        invalid_plugin: `${errorPrefix} plugin class missing from plugin manifest (invalid plugin). Please check the documentation.`,\n        invalid_title: `${errorPrefix} title of notification must be a string`,\n        permission_denied: `${errorPrefix} permission request declined`,\n        sw_notification_error: `${errorPrefix} could not show a ServiceWorker notification due to the following reason: `,\n        sw_registration_error: `${errorPrefix} could not register the ServiceWorker due to the following reason: `,\n        unknown_interface: `${errorPrefix} unable to create notification: unknown interface`\n    }\n};\n","// @flow\nimport type { Global } from 'types';\n\nexport default class Permission {\n    // Private members\n    _permissions: string[];\n    _win: Global;\n\n    // Public members\n    GRANTED: string;\n    DEFAULT: string;\n    DENIED: string;\n\n    constructor(win: Global) {\n        this._win = win;\n        this.GRANTED = 'granted';\n        this.DEFAULT = 'default';\n        this.DENIED = 'denied';\n        this._permissions = [this.GRANTED, this.DEFAULT, this.DENIED];\n    }\n\n    /**\n   * Requests permission for desktop notifications\n   * @param {Function} onGranted - Function to execute once permission is granted\n   * @param {Function} onDenied - Function to execute once permission is denied\n   * @return {void, Promise}\n   */\n    request(onGranted: () => void, onDenied: () => void) {\n        return arguments.length > 0\n            ? this._requestWithCallback(...arguments)\n            : this._requestAsPromise();\n    }\n\n    /**\n   * Old permissions implementation deprecated in favor of a promise based one\n   * @deprecated Since V1.0.4\n   * @param {Function} onGranted - Function to execute once permission is granted\n   * @param {Function} onDenied - Function to execute once permission is denied\n   * @return {void}\n   */\n    _requestWithCallback(onGranted: () => void, onDenied: () => void) {\n        const existing = this.get();\n\n        var resolved = false;\n        var resolve = (result = this._win.Notification.permission) => {\n            if (resolved) return;\n            resolved = true;\n            if (typeof result === 'undefined' && this._win.webkitNotifications)\n                result = this._win.webkitNotifications.checkPermission();\n            if (result === this.GRANTED || result === 0) {\n                if (onGranted) onGranted();\n            } else if (onDenied) onDenied();\n        };\n        var request;\n\n        /* Permissions already set */\n        if (existing !== this.DEFAULT) {\n            resolve(existing);\n        } else if (\n            this._win.webkitNotifications &&\n            this._win.webkitNotifications.checkPermission\n        ) {\n            /* Safari 6+, Legacy webkit browsers */\n            this._win.webkitNotifications.requestPermission(resolve);\n        } else if (\n            this._win.Notification &&\n            this._win.Notification.requestPermission\n        ) {\n            /* Safari 12+ */\n            /* This resolve argument will only be used in Safari */\n            /* CHrome, instead, returns a Promise */\n            request = this._win.Notification.requestPermission(resolve);\n            if (request && request.then) {\n                /* Chrome 23+ */\n                request.then(resolve).catch(function() {\n                    if (onDenied) onDenied();\n                });\n            }\n        } else if (onGranted) {\n            /* Let the user continue by default */\n            onGranted();\n        }\n    }\n\n    /**\n   * Requests permission for desktop notifications in a promise based way\n   * @return {Promise}\n   */\n    _requestAsPromise(): Promise<void> {\n        const existing = this.get();\n\n        let isGranted = result => result === this.GRANTED || result === 0;\n\n        /* Permissions already set */\n        var hasPermissions = existing !== this.DEFAULT;\n\n        /* Safari 6+, Chrome 23+ */\n        var isModernAPI =\n            this._win.Notification && this._win.Notification.requestPermission;\n\n        /* Legacy webkit browsers */\n        var isWebkitAPI =\n            this._win.webkitNotifications &&\n            this._win.webkitNotifications.checkPermission;\n\n        return new Promise((resolvePromise, rejectPromise) => {\n            var resolved = false;\n            var resolver = result => {\n                if (resolved) return;\n                resolved = true;\n                isGranted(result) ? resolvePromise() : rejectPromise();\n            };\n            var request;\n\n            if (hasPermissions) {\n                resolver(existing);\n            } else if (isWebkitAPI) {\n                this._win.webkitNotifications.requestPermission(result => {\n                    resolver(result);\n                });\n            } else if (isModernAPI) {\n                /* Safari 12+ */\n                /* This resolver argument will only be used in Safari */\n                /* CHrome, instead, returns a Promise */\n                request = this._win.Notification.requestPermission(resolver);\n                if (request && request.then) {\n                    /* Chrome 23+ */\n                    request.then(resolver).catch(rejectPromise);\n                }\n            } else resolvePromise();\n        });\n    }\n\n    /**\n   * Returns whether Push has been granted permission to run\n   * @return {Boolean}\n   */\n    has() {\n        return this.get() === this.GRANTED;\n    }\n\n    /**\n   * Gets the permission level\n   * @return {Permission} The permission level\n   */\n    get() {\n        let permission;\n\n        /* Safari 6+, Chrome 23+ */\n        if (this._win.Notification && this._win.Notification.permission)\n            permission = this._win.Notification.permission;\n        else if (\n            this._win.webkitNotifications &&\n            this._win.webkitNotifications.checkPermission\n        )\n            /* Legacy webkit browsers */\n            permission = this._permissions[\n                this._win.webkitNotifications.checkPermission()\n            ];\n        else if (navigator.mozNotification)\n            /* Firefox Mobile */\n            permission = this.GRANTED;\n        else if (this._win.external && this._win.external.msIsSiteMode)\n            /* IE9+ */\n            permission = this._win.external.msIsSiteMode()\n                ? this.GRANTED\n                : this.DEFAULT;\n        else permission = this.GRANTED;\n\n        return permission;\n    }\n}\n","// @flow\nexport default class Util {\n    static isUndefined(obj) {\n        return obj === undefined;\n    }\n\n    static isNull(obs) {\n        return obj === null;\n    }\n\n    static isString(obj) {\n        return typeof obj === 'string';\n    }\n\n    static isFunction(obj) {\n        return obj && {}.toString.call(obj) === '[object Function]';\n    }\n\n    static isObject(obj) {\n        return typeof obj === 'object';\n    }\n\n    static objectMerge(target, source) {\n        for (var key in source) {\n            if (\n                target.hasOwnProperty(key) &&\n                this.isObject(target[key]) &&\n                this.isObject(source[key])\n            ) {\n                this.objectMerge(target[key], source[key]);\n            } else {\n                target[key] = source[key];\n            }\n        }\n    }\n}\n","// @flow\nimport type { Global } from 'types';\n\nexport default class AbstractAgent {\n    _win: Global;\n\n    constructor(win: Global) {\n        this._win = win;\n    }\n}\n","// @flow\nimport { AbstractAgent } from 'agents';\nimport { Util } from 'push';\nimport type { PushOptions, GenericNotification, Global } from 'types';\n\n/**\n * Notification agent for modern desktop browsers:\n * Safari 6+, Firefox 22+, Chrome 22+, Opera 25+\n */\nexport default class DesktopAgent extends AbstractAgent {\n    _win: Global;\n\n    /**\n     * Returns a boolean denoting support\n     * @returns {Boolean} boolean denoting whether webkit notifications are supported\n     */\n    isSupported() {\n        return this._win.Notification !== undefined;\n    }\n\n    /**\n     * Creates a new notification\n     * @param title - notification title\n     * @param options - notification options array\n     * @returns {Notification}\n     */\n    create(title: string, options: PushOptions) {\n        return new this._win.Notification(title, {\n            icon:\n                Util.isString(options.icon) ||\n                Util.isUndefined(options.icon) ||\n                Util.isNull(options.icon)\n                    ? options.icon\n                    : options.icon.x32,\n            body: options.body,\n            tag: options.tag,\n            requireInteraction: options.requireInteraction\n        });\n    }\n\n    /**\n     * Close a given notification\n     * @param notification - notification to close\n     */\n    close(notification: GenericNotification) {\n        notification.close();\n    }\n}\n","// @flow\nimport { Util, Messages } from 'push';\nimport { AbstractAgent } from 'agents';\nimport type { Global, GenericNotification, PushOptions } from 'types';\n\n/**\n * Notification agent for modern desktop browsers:\n * Safari 6+, Firefox 22+, Chrome 22+, Opera 25+\n */\nexport default class MobileChromeAgent extends AbstractAgent {\n    _win: Global;\n\n    /**\n     * Returns a boolean denoting support\n     * @returns {Boolean} boolean denoting whether webkit notifications are supported\n     */\n    isSupported() {\n        return (\n            this._win.navigator !== undefined &&\n            this._win.navigator.serviceWorker !== undefined\n        );\n    }\n\n    /**\n     * Returns the function body as a string\n     * @param func\n     */\n    getFunctionBody(func: () => void) {\n        const str = func.toString().match(/function[^{]+{([\\s\\S]*)}$/);\n        return typeof str !== 'undefined' && str !== null && str.length > 1\n            ? str[1]\n            : null;\n    }\n\n    /**\n     * Creates a new notification\n     * @param id                ID of notification\n     * @param title             Title of notification\n     * @param options           Options object\n     * @param serviceWorker     ServiceWorker path\n     * @param callback          Callback function\n     */\n    create(\n        id: number,\n        title: string,\n        options: PushOptions,\n        serviceWorker: string,\n        callback: (GenericNotification[]) => void\n    ) {\n        /* Register ServiceWorker */\n        this._win.navigator.serviceWorker.register(serviceWorker);\n\n        this._win.navigator.serviceWorker.ready\n            .then(registration => {\n                /* Local data the service worker will use */\n                let localData = {\n                    id: id,\n                    link: options.link,\n                    origin: document.location.href,\n                    onClick: Util.isFunction(options.onClick)\n                        ? this.getFunctionBody(options.onClick)\n                        : '',\n                    onClose: Util.isFunction(options.onClose)\n                        ? this.getFunctionBody(options.onClose)\n                        : ''\n                };\n\n                /* Merge the local data with user-provided data */\n                if (options.data !== undefined && options.data !== null)\n                    localData = Object.assign(localData, options.data);\n\n                /* Show the notification */\n                registration\n                    .showNotification(title, {\n                        icon: options.icon,\n                        body: options.body,\n                        vibrate: options.vibrate,\n                        tag: options.tag,\n                        data: localData,\n                        requireInteraction: options.requireInteraction,\n                        silent: options.silent\n                    })\n                    .then(() => {\n                        registration.getNotifications().then(notifications => {\n                            /* Send an empty message so the ServiceWorker knows who the client is */\n                            registration.active.postMessage('');\n\n                            /* Trigger callback */\n                            callback(notifications);\n                        });\n                    })\n                    .catch(function(error) {\n                        throw new Error(\n                            Messages.errors.sw_notification_error +\n                                error.message\n                        );\n                    });\n            })\n            .catch(function(error) {\n                throw new Error(\n                    Messages.errors.sw_registration_error + error.message\n                );\n            });\n    }\n\n    /**\n     * Close all notification\n     */\n    close() {\n        // Can't do this with service workers\n    }\n}\n","// @flow\nimport { AbstractAgent } from 'agents';\nimport type { Global, PushOptions } from 'types';\n\n/**\n * Notification agent for modern desktop browsers:\n * Safari 6+, Firefox 22+, Chrome 22+, Opera 25+\n */\nexport default class MobileFirefoxAgent extends AbstractAgent {\n    _win: Global;\n\n    /**\n     * Returns a boolean denoting support\n     * @returns {Boolean} boolean denoting whether webkit notifications are supported\n     */\n    isSupported() {\n        return this._win.navigator.mozNotification !== undefined;\n    }\n\n    /**\n     * Creates a new notification\n     * @param title - notification title\n     * @param options - notification options array\n     * @returns {Notification}\n     */\n    create(title: string, options: PushOptions) {\n        let notification = this._win.navigator.mozNotification.createNotification(\n            title,\n            options.body,\n            options.icon\n        );\n\n        notification.show();\n\n        return notification;\n    }\n}\n","// @flow\nimport { AbstractAgent } from 'agents';\nimport { Util } from 'push';\nimport type { PushOptions, Global } from 'types';\n\n/**\n * Notification agent for IE9\n */\nexport default class MSAgent extends AbstractAgent {\n    _win: Global;\n\n    /**\n     * Returns a boolean denoting support\n     * @returns {Boolean} boolean denoting whether webkit notifications are supported\n     */\n    isSupported() {\n        return (\n            this._win.external !== undefined &&\n            this._win.external.msIsSiteMode !== undefined\n        );\n    }\n\n    /**\n     * Creates a new notification\n     * @param title - notification title\n     * @param options - notification options array\n     * @returns {Notification}\n     */\n    create(title: string, options: PushOptions) {\n        /* Clear any previous notifications */\n        this._win.external.msSiteModeClearIconOverlay();\n\n        this._win.external.msSiteModeSetIconOverlay(\n            Util.isString(options.icon) || Util.isUndefined(options.icon)\n                ? options.icon\n                : options.icon.x16,\n            title\n        );\n\n        this._win.external.msSiteModeActivate();\n\n        return null;\n    }\n\n    /**\n     * Close a given notification\n     * @param notification - notification to close\n     */\n    close() {\n        this._win.external.msSiteModeClearIconOverlay();\n    }\n}\n","// @flow\nimport { AbstractAgent } from 'agents';\nimport type { Global, GenericNotification, PushOptions } from 'types';\n\n/**\n * Notification agent for old Chrome versions (and some) Firefox\n */\nexport default class WebKitAgent extends AbstractAgent {\n    _win: Global;\n\n    /**\n     * Returns a boolean denoting support\n     * @returns {Boolean} boolean denoting whether webkit notifications are supported\n     */\n    isSupported() {\n        return this._win.webkitNotifications !== undefined;\n    }\n\n    /**\n     * Creates a new notification\n     * @param title - notification title\n     * @param options - notification options array\n     * @returns {Notification}\n     */\n    create(title: string, options: PushOptions) {\n        let notification = this._win.webkitNotifications.createNotification(\n            options.icon,\n            title,\n            options.body\n        );\n\n        notification.show();\n\n        return notification;\n    }\n\n    /**\n     * Close a given notification\n     * @param notification - notification to close\n     */\n    close(notification: GenericNotification) {\n        notification.cancel();\n    }\n}\n","// @flow\nimport { Push } from 'push';\n\nexport default new Push(typeof window !== 'undefined' ? window : global);\n","// @flow\nimport { Messages, Permission, Util } from 'push';\nimport type { PluginManifest, GenericNotification, PushOptions } from 'types';\n\n/* Import notification agents */\nimport {\n    DesktopAgent,\n    MobileChromeAgent,\n    MobileFirefoxAgent,\n    MSAgent,\n    WebKitAgent\n} from 'agents';\n\nexport default class Push {\n    // Private members\n    _agents: {\n        desktop: DesktopAgent,\n        chrome: MobileChromeAgent,\n        firefox: MobileFirefoxAgent,\n        ms: MSAgent,\n        webkit: WebKitAgent\n    };\n    _configuration: {\n        serviceWorker: string,\n        fallback: ({}) => void\n    };\n    _currentId: number;\n    _notifications: {};\n    _win: {};\n\n    // Public members\n    Permission: Permission;\n\n    constructor(win: {}) {\n        /* Private variables */\n\n        /* ID to use for new notifications */\n        this._currentId = 0;\n\n        /* Map of open notifications */\n        this._notifications = {};\n\n        /* Window object */\n        this._win = win;\n\n        /* Public variables */\n        this.Permission = new Permission(win);\n\n        /* Agents */\n        this._agents = {\n            desktop: new DesktopAgent(win),\n            chrome: new MobileChromeAgent(win),\n            firefox: new MobileFirefoxAgent(win),\n            ms: new MSAgent(win),\n            webkit: new WebKitAgent(win)\n        };\n\n        this._configuration = {\n            serviceWorker: '/serviceWorker.min.js',\n            fallback: function(payload) {}\n        };\n    }\n\n    /**\n     * Closes a notification\n     * @param id            ID of notification\n     * @returns {boolean}   denotes whether the operation was successful\n     * @private\n     */\n    _closeNotification(id: number | string) {\n        let success = true;\n        const notification = this._notifications[id];\n\n        if (notification !== undefined) {\n            success = this._removeNotification(id);\n\n            /* Safari 6+, Firefox 22+, Chrome 22+, Opera 25+ */\n            if (this._agents.desktop.isSupported())\n                this._agents.desktop.close(notification);\n            else if (this._agents.webkit.isSupported())\n                /* Legacy WebKit browsers */\n                this._agents.webkit.close(notification);\n            else if (this._agents.ms.isSupported())\n                /* IE9 */\n                this._agents.ms.close();\n            else {\n                success = false;\n                throw new Error(Messages.errors.unknown_interface);\n            }\n\n            return success;\n        }\n\n        return false;\n    }\n\n    /**\n   * Adds a notification to the global dictionary of notifications\n   * @param {Notification} notification\n   * @return {Integer} Dictionary key of the notification\n   * @private\n   */\n    _addNotification(notification: GenericNotification) {\n        const id = this._currentId;\n        this._notifications[id] = notification;\n        this._currentId++;\n        return id;\n    }\n\n    /**\n   * Removes a notification with the given ID\n   * @param  {Integer} id - Dictionary key/ID of the notification to remove\n   * @return {Boolean} boolean denoting success\n   * @private\n   */\n    _removeNotification(id: number | string) {\n        let success = false;\n\n        if (this._notifications.hasOwnProperty(id)) {\n            /* We're successful if we omit the given ID from the new array */\n            delete this._notifications[id];\n            success = true;\n        }\n\n        return success;\n    }\n\n    /**\n   * Creates the wrapper for a given notification\n   *\n   * @param {Integer} id - Dictionary key/ID of the notification\n   * @param {Map} options - Options used to create the notification\n   * @returns {Map} wrapper hashmap object\n   * @private\n   */\n    _prepareNotification(id: number, options: PushOptions) {\n        let wrapper;\n\n        /* Wrapper used to get/close notification later on */\n        wrapper = {\n            get: () => {\n                return this._notifications[id];\n            },\n\n            close: () => {\n                this._closeNotification(id);\n            }\n        };\n\n        /* Autoclose timeout */\n        if (options.timeout) {\n            setTimeout(() => {\n                wrapper.close();\n            }, options.timeout);\n        }\n\n        return wrapper;\n    }\n\n    /**\n   * Find the most recent notification from a ServiceWorker and add it to the global array\n   * @param notifications\n   * @private\n   */\n    _serviceWorkerCallback(\n        notifications: GenericNotification[],\n        options: PushOptions,\n        resolve: ({} | null) => void\n    ) {\n        let id = this._addNotification(notifications[notifications.length - 1]);\n\n        /* Listen for close requests from the ServiceWorker */\n        if (navigator && navigator.serviceWorker) {\n            navigator.serviceWorker.addEventListener('message', event => {\n                const data = JSON.parse(event.data);\n\n                if (data.action === 'close' && Number.isInteger(data.id))\n                    this._removeNotification(data.id);\n            });\n\n            resolve(this._prepareNotification(id, options));\n        }\n\n        resolve(null);\n    }\n\n    /**\n   * Callback function for the 'create' method\n   * @return {void}\n   * @private\n   */\n    _createCallback(\n        title: string,\n        options: PushOptions,\n        resolve: ({} | null) => void\n    ) {\n        let notification = null;\n        let onClose;\n\n        /* Set empty settings if none are specified */\n        options = options || {};\n\n        /* onClose event handler */\n        onClose = id => {\n            /* A bit redundant, but covers the cases when close() isn't explicitly called */\n            this._removeNotification(id);\n            if (Util.isFunction(options.onClose)) {\n                options.onClose.call(this, notification);\n            }\n        };\n\n        /* Safari 6+, Firefox 22+, Chrome 22+, Opera 25+ */\n        if (this._agents.desktop.isSupported()) {\n            try {\n                /* Create a notification using the API if possible */\n                notification = this._agents.desktop.create(title, options);\n            } catch (e) {\n                const id = this._currentId;\n                const sw = this.config().serviceWorker;\n                const cb = notifications =>\n                    this._serviceWorkerCallback(\n                        notifications,\n                        options,\n                        resolve\n                    );\n                /* Create a Chrome ServiceWorker notification if it isn't supported */\n                if (this._agents.chrome.isSupported()) {\n                    this._agents.chrome.create(id, title, options, sw, cb);\n                }\n            }\n            /* Legacy WebKit browsers */\n        } else if (this._agents.webkit.isSupported())\n            notification = this._agents.webkit.create(title, options);\n        else if (this._agents.firefox.isSupported())\n            /* Firefox Mobile */\n            this._agents.firefox.create(title, options);\n        else if (this._agents.ms.isSupported())\n            /* IE9 */\n            notification = this._agents.ms.create(title, options);\n        else {\n            /* Default fallback */\n            options.title = title;\n            this.config().fallback(options);\n        }\n\n        if (notification !== null) {\n            const id = this._addNotification(notification);\n            const wrapper = this._prepareNotification(id, options);\n\n            /* Notification callbacks */\n            if (Util.isFunction(options.onShow))\n                notification.addEventListener('show', options.onShow);\n\n            if (Util.isFunction(options.onError))\n                notification.addEventListener('error', options.onError);\n\n            if (Util.isFunction(options.onClick))\n                notification.addEventListener('click', options.onClick);\n\n            notification.addEventListener('close', () => {\n                onClose(id);\n            });\n\n            notification.addEventListener('cancel', () => {\n                onClose(id);\n            });\n\n            /* Return the wrapper so the user can call close() */\n            resolve(wrapper);\n        }\n\n        /* By default, pass an empty wrapper */\n        resolve(null);\n    }\n\n    /**\n   * Creates and displays a new notification\n   * @param {Array} options\n   * @return {Promise}\n   */\n    create(title: string, options: {}): Promise<void> {\n        let promiseCallback;\n\n        /* Fail if no or an invalid title is provided */\n        if (!Util.isString(title)) {\n            throw new Error(Messages.errors.invalid_title);\n        }\n\n        /* Request permission if it isn't granted */\n        if (!this.Permission.has()) {\n            promiseCallback = (resolve: () => void, reject: string => void) => {\n                this.Permission\n                    .request()\n                    .then(() => {\n                        this._createCallback(title, options, resolve);\n                    })\n                    .catch(() => {\n                        reject(Messages.errors.permission_denied);\n                    });\n            };\n        } else {\n            promiseCallback = (resolve: () => void, reject: string => void) => {\n                try {\n                    this._createCallback(title, options, resolve);\n                } catch (e) {\n                    reject(e);\n                }\n            };\n        }\n\n        return new Promise(promiseCallback);\n    }\n\n    /**\n   * Returns the notification count\n   * @return {Integer} The notification count\n   */\n    count() {\n        let count = 0;\n        let key;\n\n        for (key in this._notifications)\n            if (this._notifications.hasOwnProperty(key)) count++;\n\n        return count;\n    }\n\n    /**\n   * Closes a notification with the given tag\n   * @param {String} tag - Tag of the notification to close\n   * @return {Boolean} boolean denoting success\n   */\n    close(tag: string) {\n        let key, notification;\n\n        for (key in this._notifications) {\n            if (this._notifications.hasOwnProperty(key)) {\n                notification = this._notifications[key];\n\n                /* Run only if the tags match */\n                if (notification.tag === tag) {\n                    /* Call the notification's close() method */\n                    return this._closeNotification(key);\n                }\n            }\n        }\n    }\n\n    /**\n   * Clears all notifications\n   * @return {Boolean} boolean denoting whether the clear was successful in closing all notifications\n   */\n    clear() {\n        let key,\n            success = true;\n\n        for (key in this._notifications)\n            if (this._notifications.hasOwnProperty(key))\n                success = success && this._closeNotification(key);\n\n        return success;\n    }\n\n    /**\n   * Denotes whether Push is supported in the current browser\n   * @returns {boolean}\n   */\n    supported() {\n        let supported = false;\n\n        for (var agent in this._agents)\n            if (this._agents.hasOwnProperty(agent))\n                supported = supported || this._agents[agent].isSupported();\n\n        return supported;\n    }\n\n    /**\n   * Modifies settings or returns all settings if no parameter passed\n   * @param settings\n   */\n    config(settings?: {}) {\n        if (\n            typeof settings !== 'undefined' ||\n            (settings !== null && Util.isObject(settings))\n        )\n            Util.objectMerge(this._configuration, settings);\n\n        return this._configuration;\n    }\n\n    /**\n   * Copies the functions from a plugin to the main library\n   * @param plugin\n   */\n    extend(manifest: PluginManifest) {\n        var plugin,\n            Plugin,\n            hasProp = {}.hasOwnProperty;\n\n        if (!hasProp.call(manifest, 'plugin')) {\n            throw new Error(Messages.errors.invalid_plugin);\n        } else {\n            if (\n                hasProp.call(manifest, 'config') &&\n                Util.isObject(manifest.config) &&\n                manifest.config !== null\n            ) {\n                this.config(manifest.config);\n            }\n\n            Plugin = manifest.plugin;\n            plugin = new Plugin(this.config());\n\n            for (var member in plugin) {\n                if (\n                    hasProp.call(plugin, member) &&\n                    Util.isFunction(plugin[member])\n                )\n                    // $FlowFixMe\n                    this[member] = plugin[member];\n            }\n        }\n    }\n}\n"]},"metadata":{},"sourceType":"script"}