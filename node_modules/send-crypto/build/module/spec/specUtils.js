// import { List } from "immutable";
export const testEndpoints = async (t, endpoints) => {
    let expectedResult = null;
    for (let i = 0; i < endpoints.length; i++) {
        const endpoint = endpoints[i];
        if (!endpoint) {
            continue;
        }
        try {
            const result = await endpoint();
            // try {
            //     if (Array.isArray(result)) {
            //         result = List(result).sortBy(x => x.txid).toArray();
            //     }
            // } catch (error) {
            //     // ignore error
            // }
            expectedResult = expectedResult || result;
            t.deepEqual(result, expectedResult, `Comparison failed for endpoint #${i}`);
        }
        catch (error) {
            if (error.message.match(/Request failed with status code 503/)) {
                continue;
            }
            throw error;
        }
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BlY1V0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NwZWMvc3BlY1V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUVBLG9DQUFvQztBQUVwQyxNQUFNLENBQUMsTUFBTSxhQUFhLEdBQUcsS0FBSyxFQUFFLENBQTRCLEVBQUUsU0FBMEQsRUFBRSxFQUFFO0lBQzVILElBQUksY0FBYyxHQUFHLElBQUksQ0FBQztJQUMxQixLQUFLLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLE1BQU0sRUFBRSxDQUFDLEVBQUUsRUFBRTtRQUN2QyxNQUFNLFFBQVEsR0FBRyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLFFBQVEsRUFBRTtZQUFFLFNBQVM7U0FBRTtRQUM1QixJQUFJO1lBQ0EsTUFBTSxNQUFNLEdBQUcsTUFBTSxRQUFRLEVBQUUsQ0FBQztZQUNoQyxRQUFRO1lBQ1IsbUNBQW1DO1lBQ25DLCtEQUErRDtZQUMvRCxRQUFRO1lBQ1Isb0JBQW9CO1lBQ3BCLHNCQUFzQjtZQUN0QixJQUFJO1lBQ0osY0FBYyxHQUFHLGNBQWMsSUFBSSxNQUFNLENBQUM7WUFDMUMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsY0FBYyxFQUFFLG1DQUFtQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO1NBQy9FO1FBQUMsT0FBTyxLQUFLLEVBQUU7WUFDWixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLHFDQUFxQyxDQUFDLEVBQUU7Z0JBQzVELFNBQVM7YUFDWjtZQUNELE1BQU0sS0FBSyxDQUFDO1NBQ2Y7S0FDSjtBQUNMLENBQUMsQ0FBQyJ9