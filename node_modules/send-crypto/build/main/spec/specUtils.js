"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.testEndpoints = void 0;
// import { List } from "immutable";
exports.testEndpoints = async (t, endpoints) => {
    let expectedResult = null;
    for (let i = 0; i < endpoints.length; i++) {
        const endpoint = endpoints[i];
        if (!endpoint) {
            continue;
        }
        try {
            const result = await endpoint();
            // try {
            //     if (Array.isArray(result)) {
            //         result = List(result).sortBy(x => x.txid).toArray();
            //     }
            // } catch (error) {
            //     // ignore error
            // }
            expectedResult = expectedResult || result;
            t.deepEqual(result, expectedResult, `Comparison failed for endpoint #${i}`);
        }
        catch (error) {
            if (error.message.match(/Request failed with status code 503/)) {
                continue;
            }
            throw error;
        }
    }
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic3BlY1V0aWxzLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL3NwZWMvc3BlY1V0aWxzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLG9DQUFvQztBQUV2QixRQUFBLGFBQWEsR0FBRyxLQUFLLEVBQUUsQ0FBNEIsRUFBRSxTQUEwRCxFQUFFLEVBQUU7SUFDNUgsSUFBSSxjQUFjLEdBQUcsSUFBSSxDQUFDO0lBQzFCLEtBQUssSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxTQUFTLENBQUMsTUFBTSxFQUFFLENBQUMsRUFBRSxFQUFFO1FBQ3ZDLE1BQU0sUUFBUSxHQUFHLFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QixJQUFJLENBQUMsUUFBUSxFQUFFO1lBQUUsU0FBUztTQUFFO1FBQzVCLElBQUk7WUFDQSxNQUFNLE1BQU0sR0FBRyxNQUFNLFFBQVEsRUFBRSxDQUFDO1lBQ2hDLFFBQVE7WUFDUixtQ0FBbUM7WUFDbkMsK0RBQStEO1lBQy9ELFFBQVE7WUFDUixvQkFBb0I7WUFDcEIsc0JBQXNCO1lBQ3RCLElBQUk7WUFDSixjQUFjLEdBQUcsY0FBYyxJQUFJLE1BQU0sQ0FBQztZQUMxQyxDQUFDLENBQUMsU0FBUyxDQUFDLE1BQU0sRUFBRSxjQUFjLEVBQUUsbUNBQW1DLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDL0U7UUFBQyxPQUFPLEtBQUssRUFBRTtZQUNaLElBQUksS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMscUNBQXFDLENBQUMsRUFBRTtnQkFDNUQsU0FBUzthQUNaO1lBQ0QsTUFBTSxLQUFLLENBQUM7U0FDZjtLQUNKO0FBQ0wsQ0FBQyxDQUFDIn0=